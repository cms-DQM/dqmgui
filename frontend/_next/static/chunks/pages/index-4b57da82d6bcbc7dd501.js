_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[11],{"+QRC":function(e,t,n){"use strict";var a=n("E9nw"),r={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,o,l,i,c,u,s=!1;t||(t={}),n=t.debug||!1;try{if(l=a(),i=document.createRange(),c=document.getSelection(),(u=document.createElement("span")).textContent=e,u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(a){if(a.stopPropagation(),t.format)if(a.preventDefault(),"undefined"===typeof a.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=r[t.format]||r.default;window.clipboardData.setData(o,e)}else a.clipboardData.clearData(),a.clipboardData.setData(t.format,e);t.onCopy&&(a.preventDefault(),t.onCopy(a.clipboardData))})),document.body.appendChild(u),i.selectNodeContents(u),c.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");s=!0}catch(d){n&&console.error("unable to copy using execCommand: ",d),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),s=!0}catch(d){n&&console.error("unable to copy using clipboardData: ",d),n&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(i):c.removeAllRanges()),u&&document.body.removeChild(u),l()}return s}},"/EDR":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("23aj")}])},"23aj":function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),o=n("g4pe"),l=n.n(o),i=n("20a2"),c=n.n(i),u=n("kPKH"),s=n("3S7+"),d=n("4Hbs"),f=n("4+tb"),p=n.n(f),b=function(e,t){var n=p()({search_run_number:e,search_dataset_name:t});c.a.push({pathname:"/",query:n})},m=n("ODXe"),h=n("IdJg"),v=n("sdz8"),g=n("0XKZ"),y=n("iaY6"),O=n("W9HT"),_=n("mrpT"),j=n("+6GR"),w=n("DB5t"),S=n("KQm4"),E="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),k=new Uint8Array(16);function P(){if(!E)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return E(k)}for(var C=[],x=0;x<256;++x)C[x]=(x+256).toString(16).substr(1);var R=function(e,t){var n=t||0,a=C;return[a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]]].join("")};var T=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||P)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;o<16;++o)t[a+o]=r[o];return t||R(r)},N=n("LvDl"),L=n.n(N),D=n("rePB");function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){Object(D.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e){var t=e?e.split("/"):["","",""],n=p()(t);return n.reduce((function(e,t){var a=n.indexOf(t),r="part_".concat(a);return I(I({},e),{},Object(D.a)({},r,t))}),{})},q=function(e){if(e){var t=null===e||void 0===e?void 0:e.split("&");return null===t||void 0===t?void 0:t.map((function(e){var t=T(),n=e?p()(e.split("/")):void 0,a=n?n.pop():"";return{id:t,checked:!0,run_number:n?n.shift():"",dataset_name:n?"/"+(null===n||void 0===n?void 0:n.join("/")):"",label:a}}))}return[]},H=function(e,t){var n=e.map((function(e){return M(e)}));return L.a.chain(n).groupBy(t).value()},A=function(e,t,n,a,r){var o=a.filter((function(e){return e.id===n}))[0],l=a.indexOf(o);return o[t]=e,a[l]=o,r(a)},B=n("9ZV4"),F=function(e,t){var n=(e?e.split("&"):[]).map((function(e){var n=encodeURI(t.name);if([t.run_number+t.dataset_name,t.path,n].join("/")!==e)return e}));return p()(n).join("&")},V=function(e,t){var n,a=t.run_number,r=null===(n=t.dataset_name)||void 0===n?void 0:n.substring(1),o=t.path,l=t.name,i=[a,r,o,encodeURI(l)].join("/");return console.log(i,e),"".concat(e?e+"&":"").concat(i)},U=function(e){var t=e&&e.map((function(e){return"".concat(e.run_number).concat(e.dataset_name,"/").concat(e.label?e.label:e.run_number)}));return null===t||void 0===t?void 0:t.join("&")},W=function(e,t,n,a,r){return p()({run_number:t.run_number?t.run_number:"",dataset_name:t.dataset_name?t.dataset_name:"",folders_path:a,plot_name:n,height:r?e.rightSideSize.h:e.size.h,width:r?e.rightSideSize.w:e.size.w,customizeProps:e.customizeProps,stats:e.stats,overlay:t.overlay,notOlderThan:e.updated_by_not_older_than?e.updated_by_not_older_than:"",overlay_plot:t.overlay_data?q(t.overlay_data):[],normalize:e.normalize?e.normalize:"False",lumi:t.lumi})},J=function(e,t){return Object(B.a)(Object(B.d)({selected_plots:"".concat(V(e.selected_plots,t))},e))},K=function(e,t){Object(B.a)(Object(B.d)({selected_plots:"".concat(F(e.selected_plots,t))},e))},G=function(e){e&&e.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},X=function(e){e&&e.current&&(e.current.scrollTop=e.current.scrollHeight)},Y=function(e){var t=!1;return j.a.new_back_end.new_back_end?!(!e.qresults||!e.qresults.find((function(e){return 300===e}))):(e.qresults&&e.qresults.forEach((function(e){if(e.hasOwnProperty("status")&&300===e.status)return t=!0,!0})),t||t)},Q=a.createElement,Z=function(e){var t=e.query,n=e.info,r=a.useContext(w.b),o=W(r,t,n.value,"/HLT/EventInfo"),l=Object(_.a)(Object(j.f)(o),{},[t.dataset_name,t.run_number]),i=l.data,c=l.isLoading;return Q(g.e,{display:"flex",justifycontent:"space-between"},Q(g.b,{space:"1"},n.label),Q(g.b,{space:"1",bold:"true"},c?Q(O.a,{size:"small"}):function(e){var t=i?i.fString:null;return"time"===e.type&&t?new Date(1e3*parseInt(t)).toUTCString():t||"No information"}(n)))},$=n("Rja7"),ee=n("FUt6"),te=a.createElement,ne=function(e){var t=e.query,n=e.toggleModal,r=e.open,o=a.useContext(w.b),l=W(o,t,"iRun","/HLT/EventInfo"),i=Object(_.a)(Object(j.f)(l),{},[t.dataset_name,t.run_number]),c=i.data,u=(i.isLoading,Object(ee.e)({value:"iRun",label:"Run"},c));return te(v.i,{title:"Run ".concat(u," information"),visible:r,onCancel:function(){return n(!1)},footer:[te(g.m,{color:y.a.colors.secondary.main,background:"white",key:"Close",onClick:function(){return n(!1)}},"Close")]},r&&te("div",null,$.e.map((function(e){return te(Z,{info:e,query:t})}))))},ae=a.createElement,re=function(e){var t=e.query,n=a.useState(!1),r=Object(m.a)(n,2),o=r[0],l=r[1];return ae(a.Fragment,null,ae(ne,{toggleModal:l,open:o,query:t}),ae(u.a,{onClick:function(){return l(!o)},style:{width:"min-content"}},ae(h.a,{content:"Run info"},ae(g.k,null))))},oe=n("wx14"),le=n("TSYQ"),ie=n.n(le),ce=n("c+Xe"),ue=n("H84U"),se=n("uaoM"),de=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},fe=function(e,t){var n=e.prefixCls,r=e.component,o=void 0===r?"article":r,l=e.className,i=e["aria-label"],c=e.setContentRef,u=e.children,s=de(e,["prefixCls","component","className","aria-label","setContentRef","children"]),d=t;return c&&(Object(se.a)(!1,"Typography","`setContentRef` is deprecated. Please use `ref` instead."),d=Object(ce.a)(t,c)),a.createElement(ue.a,null,(function(e){var t=e.getPrefixCls,r=e.direction,c=o,f=t("typography",n),p=ie()(f,Object(D.a)({},"".concat(f,"-rtl"),"rtl"===r),l);return a.createElement(c,Object(oe.a)({className:p,"aria-label":i,ref:d},s),u)}))},pe=a.forwardRef(fe);pe.displayName="Typography";var be=pe,me=n("U8pU"),he=n("bT9E"),ve=n("1OyB"),ge=n("vuIU"),ye=n("Ji7U"),Oe=n("LK+K"),_e=n("Zm9Q"),je=n("+QRC"),we=n.n(je),Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},Ee=n("6VBw"),ke=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:Se}))};ke.displayName="EditOutlined";var Pe=a.forwardRef(ke),Ce=n("bRQS"),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},Re=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:xe}))};Re.displayName="CopyOutlined";var Te=a.forwardRef(Re),Ne=n("t23M"),Le=n("wEI+"),De=n("YMnH"),ze=n("4IlW"),Ie=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},Me={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},qe=a.forwardRef((function(e,t){var n=e.style,r=e.noStyle,o=e.disabled,l=Ie(e,["style","noStyle","disabled"]),i={};return r||(i=Object(oe.a)({},Me)),o&&(i.pointerEvents="none"),i=Object(oe.a)(Object(oe.a)({},i),n),a.createElement("div",Object(oe.a)({role:"button",tabIndex:0,ref:t},l,{onKeyDown:function(e){e.keyCode===ze.a.ENTER&&e.preventDefault()},onKeyUp:function(t){var n=t.keyCode,a=e.onClick;n===ze.a.ENTER&&a&&a()},style:i}))})),He=n("oHiP"),Ae=function(e){if("undefined"!==typeof window&&window.document&&window.document.documentElement){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some((function(e){return e in n.style}))}return!1},Be=(Ae(["flex","webkitFlex","Flex","msFlex"]),{icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"}),Fe=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:Be}))};Fe.displayName="EnterOutlined";var Ve,Ue=a.forwardRef(Fe),We=n("whJP"),Je=function(e){var t=e.prefixCls,n=e["aria-label"],r=e.className,o=e.style,l=e.direction,i=e.maxLength,c=e.autoSize,u=void 0===c||c,s=e.value,d=e.onSave,f=e.onCancel,p=a.useRef(),b=a.useRef(!1),h=a.useRef(),v=a.useState(s),g=Object(m.a)(v,2),y=g[0],O=g[1];a.useEffect((function(){O(s)}),[s]),a.useEffect((function(){if(p.current&&p.current.resizableTextArea){var e=p.current.resizableTextArea.textArea;e.focus();var t=e.value.length;e.setSelectionRange(t,t)}}),[]);var _=function(){d(y.trim())},j=ie()(t,"".concat(t,"-edit-content"),Object(D.a)({},"".concat(t,"-rtl"),"rtl"===l),r);return a.createElement("div",{className:j,style:o},a.createElement(We.a,{ref:p,maxLength:i,value:y,onChange:function(e){var t=e.target;O(t.value.replace(/[\n\r]/g,""))},onKeyDown:function(e){var t=e.keyCode;b.current||(h.current=t)},onKeyUp:function(e){var t=e.keyCode,n=e.ctrlKey,a=e.altKey,r=e.metaKey,o=e.shiftKey;h.current!==t||b.current||n||a||r||o||(t===ze.a.ENTER?_():t===ze.a.ESC&&f())},onCompositionStart:function(){b.current=!0},onCompositionEnd:function(){b.current=!1},onBlur:function(){_()},"aria-label":n,autoSize:u}),a.createElement(Ue,{className:"".concat(t,"-edit-content-confirm")}))},Ke=n("i8i4"),Ge=n.n(Ke),Xe={padding:0,margin:0,display:"inline",lineHeight:"inherit"};function Ye(e){if(!e)return 0;var t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var Qe=function(e,t,n,r,o){Ve||((Ve=document.createElement("div")).setAttribute("aria-hidden","true"),document.body.appendChild(Ve));var l,i=t.rows,c=t.suffix,u=void 0===c?"":c,s=window.getComputedStyle(e),d=(l=s,Array.prototype.slice.apply(l).map((function(e){return"".concat(e,": ").concat(l.getPropertyValue(e),";")})).join("")),f=Ye(s.lineHeight),p=Math.round(f*(i+1)+Ye(s.paddingTop)+Ye(s.paddingBottom));Ve.setAttribute("style",d),Ve.style.position="fixed",Ve.style.left="0",Ve.style.height="auto",Ve.style.minHeight="auto",Ve.style.maxHeight="auto",Ve.style.top="-999999px",Ve.style.zIndex="-1000",Ve.style.textOverflow="clip",Ve.style.whiteSpace="normal",Ve.style.webkitLineClamp="none";var b=function(e){var t=[];return e.forEach((function(e){var n=t[t.length-1];"string"===typeof e&&"string"===typeof n?t[t.length-1]+=e:t.push(e)})),t}(Object(_e.a)(n));function m(){return Ve.offsetHeight<p}if(Object(Ke.render)(a.createElement("div",{style:Xe},a.createElement("span",{style:Xe},b,u),a.createElement("span",{style:Xe},r)),Ve),m())return Object(Ke.unmountComponentAtNode)(Ve),{content:n,text:Ve.innerHTML,ellipsis:!1};var h=Array.prototype.slice.apply(Ve.childNodes[0].childNodes[0].cloneNode(!0).childNodes).filter((function(e){return 8!==e.nodeType})),v=Array.prototype.slice.apply(Ve.childNodes[0].childNodes[1].cloneNode(!0).childNodes);Object(Ke.unmountComponentAtNode)(Ve);var g=[];Ve.innerHTML="";var y=document.createElement("span");Ve.appendChild(y);var O=document.createTextNode(o+u);function _(e){y.insertBefore(e,O)}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=Math.floor((n+a)/2),l=t.slice(0,o);if(e.textContent=l,n>=a-1)for(var i=a;i>=n;i-=1){var c=t.slice(0,i);if(e.textContent=c,m()||!c)return i===t.length?{finished:!1,reactNode:t}:{finished:!0,reactNode:c}}return m()?j(e,t,o,a,o):j(e,t,n,o,r)}function w(e,t){var n=e.nodeType;if(1===n)return _(e),m()?{finished:!1,reactNode:b[t]}:(y.removeChild(e),{finished:!0,reactNode:null});if(3===n){var a=e.textContent||"",r=document.createTextNode(a);return _(r),j(r,a)}return{finished:!1,reactNode:null}}return y.appendChild(O),v.forEach((function(e){Ve.appendChild(e)})),h.some((function(e,t){var n=w(e,t),a=n.finished,r=n.reactNode;return r&&g.push(r),a})),{content:g,text:Ve.innerHTML,ellipsis:!0}},Ze=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},$e=Ae("webkitLineClamp"),et=Ae("textOverflow");var tt=function(e){Object(ye.a)(n,e);var t=Object(Oe.a)(n);function n(){var e;return Object(ve.a)(this,n),(e=t.apply(this,arguments)).contentRef=a.createRef(),e.state={edit:!1,copied:!1,ellipsisText:"",ellipsisContent:null,isEllipsis:!1,expanded:!1,clientRendered:!1},e.getPrefixCls=function(){var t=e.props.prefixCls;return(0,e.context.getPrefixCls)("typography",t)},e.onExpandClick=function(t){var n=e.getEllipsis().onExpand;e.setState({expanded:!0}),n&&n(t)},e.onEditClick=function(){e.triggerEdit(!0)},e.onEditChange=function(t){var n=e.getEditable().onChange;n&&n(t),e.triggerEdit(!1)},e.onEditCancel=function(){e.triggerEdit(!1)},e.onCopyClick=function(t){t.preventDefault();var n=e.props,a=n.children,r=n.copyable,o=Object(oe.a)({},"object"===Object(me.a)(r)?r:null);void 0===o.text&&(o.text=String(a)),we()(o.text||""),e.setState({copied:!0},(function(){o.onCopy&&o.onCopy(),e.copyId=window.setTimeout((function(){e.setState({copied:!1})}),3e3)}))},e.setEditRef=function(t){e.editIcon=t},e.triggerEdit=function(t){var n=e.getEditable().onStart;t&&n&&n(),e.setState({edit:t},(function(){!t&&e.editIcon&&e.editIcon.focus()}))},e.resizeOnNextFrame=function(){He.a.cancel(e.rafId),e.rafId=Object(He.a)((function(){e.syncEllipsis()}))},e}return Object(ge.a)(n,[{key:"componentDidMount",value:function(){this.setState({clientRendered:!0}),this.resizeOnNextFrame()}},{key:"componentDidUpdate",value:function(e){var t=this.props.children,n=this.getEllipsis(),a=this.getEllipsis(e);t===e.children&&n.rows===a.rows||this.resizeOnNextFrame()}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.copyId),He.a.cancel(this.rafId)}},{key:"getEditable",value:function(e){var t=this.state.edit,n=(e||this.props).editable;return n?Object(oe.a)({editing:t},"object"===Object(me.a)(n)?n:null):{editing:t}}},{key:"getEllipsis",value:function(e){var t=(e||this.props).ellipsis;return t?Object(oe.a)({rows:1,expandable:!1},"object"===Object(me.a)(t)?t:null):{}}},{key:"canUseCSSEllipsis",value:function(){var e=this.state.clientRendered,t=this.props,n=t.editable,a=t.copyable,r=this.getEllipsis(),o=r.rows,l=r.expandable,i=r.suffix,c=r.onEllipsis,u=r.tooltip;return!i&&!u&&(!(n||a||l||!e||c)&&(1===o?et:$e))}},{key:"syncEllipsis",value:function(){var e=this.state,t=e.ellipsisText,n=e.isEllipsis,a=e.expanded,r=this.getEllipsis(),o=r.rows,l=r.suffix,i=r.onEllipsis,c=this.props.children;if(o&&!(o<0)&&this.contentRef.current&&!a&&!this.canUseCSSEllipsis()){Object(se.a)(Object(_e.a)(c).every((function(e){return"string"===typeof e})),"Typography","`ellipsis` should use string as children only.");var u=Qe(this.contentRef.current,{rows:o,suffix:l},c,this.renderOperations(!0),"..."),s=u.content,d=u.text,f=u.ellipsis;t===d&&n===f||(this.setState({ellipsisText:d,ellipsisContent:s,isEllipsis:f}),n!==f&&i&&i(f))}}},{key:"renderExpand",value:function(e){var t,n=this.getEllipsis(),r=n.expandable,o=n.symbol,l=this.state,i=l.expanded,c=l.isEllipsis;return r&&(e||!i&&c)?(t=o||this.expandStr,a.createElement("a",{key:"expand",className:"".concat(this.getPrefixCls(),"-expand"),onClick:this.onExpandClick,"aria-label":this.expandStr},t)):null}},{key:"renderEdit",value:function(){var e=this.props.editable;if(e){var t=e.icon,n=e.tooltip,r=Object(_e.a)(n)[0]||this.editStr,o="string"===typeof r?r:"";return a.createElement(s.a,{key:"edit",title:!1===n?"":r},a.createElement(qe,{ref:this.setEditRef,className:"".concat(this.getPrefixCls(),"-edit"),onClick:this.onEditClick,"aria-label":o},t||a.createElement(Pe,{role:"button"})))}}},{key:"renderCopy",value:function(){var e=this.state.copied,t=this.props.copyable;if(t){var n=this.getPrefixCls(),r=t.tooltips,o=Object(_e.a)(r);0===o.length&&(o=[this.copyStr,this.copiedStr]);var l=e?o[1]:o[0],i="string"===typeof l?l:"",c=Object(_e.a)(t.icon);return a.createElement(s.a,{key:"copy",title:!1===r?"":l},a.createElement(qe,{className:ie()("".concat(n,"-copy"),e&&"".concat(n,"-copy-success")),onClick:this.onCopyClick,"aria-label":i},e?c[1]||a.createElement(Ce.a,null):c[0]||a.createElement(Te,null)))}}},{key:"renderEditInput",value:function(){var e=this.props,t=e.children,n=e.className,r=e.style,o=this.context.direction,l=this.getEditable(),i=l.maxLength,c=l.autoSize;return a.createElement(Je,{value:"string"===typeof t?t:"",onSave:this.onEditChange,onCancel:this.onEditCancel,prefixCls:this.getPrefixCls(),className:n,style:r,direction:o,maxLength:i,autoSize:c})}},{key:"renderOperations",value:function(e){return[this.renderExpand(e),this.renderEdit(),this.renderCopy()].filter((function(e){return e}))}},{key:"renderContent",value:function(){var e=this,t=this.state,n=t.ellipsisContent,r=t.isEllipsis,o=t.expanded,l=this.props,i=l.component,c=l.children,u=l.className,d=l.type,f=l.disabled,p=l.style,b=Ze(l,["component","children","className","type","disabled","style"]),m=this.context.direction,h=this.getEllipsis(),v=h.rows,g=h.suffix,y=h.tooltip,O=this.getPrefixCls(),_=Object(he.a)(b,["prefixCls","editable","copyable","ellipsis","mark","code","delete","underline","strong","keyboard"].concat(Object(S.a)(Le.a))),j=this.canUseCSSEllipsis(),w=1===v&&j,E=v&&v>1&&j,k=c;if(v&&r&&!o&&!j){var P=b.title,C=P||"";P||"string"!==typeof c&&"number"!==typeof c||(C=String(c)),C=null===C||void 0===C?void 0:C.slice(String(n||"").length),k=a.createElement(a.Fragment,null,n,a.createElement("span",{title:C,"aria-hidden":"true"},"..."),g),y&&(k=a.createElement(s.a,{title:!0===y?c:y},a.createElement("span",null,k)))}else k=a.createElement(a.Fragment,null,c,g);return k=function(e,t){var n=e.mark,r=e.code,o=e.underline,l=e.delete,i=e.strong,c=e.keyboard,u=t;function s(e,t){e&&(u=a.createElement(t,{},u))}return s(i,"strong"),s(o,"u"),s(l,"del"),s(r,"code"),s(n,"mark"),s(c,"kbd"),u}(this.props,k),a.createElement(De.a,{componentName:"Text"},(function(t){var n,r=t.edit,o=t.copy,l=t.copied,c=t.expand;return e.editStr=r,e.copyStr=o,e.copiedStr=l,e.expandStr=c,a.createElement(Ne.a,{onResize:e.resizeOnNextFrame,disabled:!v},a.createElement(be,Object(oe.a)({className:ie()((n={},Object(D.a)(n,"".concat(O,"-").concat(d),d),Object(D.a)(n,"".concat(O,"-disabled"),f),Object(D.a)(n,"".concat(O,"-ellipsis"),v),Object(D.a)(n,"".concat(O,"-ellipsis-single-line"),w),Object(D.a)(n,"".concat(O,"-ellipsis-multiple-line"),E),n),u),style:Object(oe.a)(Object(oe.a)({},p),{WebkitLineClamp:E?v:void 0}),component:i,ref:e.contentRef,direction:m},_),k,e.renderOperations()))}))}},{key:"render",value:function(){return this.getEditable().editing?this.renderEditInput():this.renderContent()}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.children,n=e.editable;return Object(se.a)(!n||"string"===typeof t,"Typography","When `editable` is enabled, the `children` should use string."),{}}}]),n}(a.Component);tt.contextType=ue.b,tt.defaultProps={children:""};var nt=tt,at=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},rt=function(e){var t=e.ellipsis,n=at(e,["ellipsis"]),r=a.useMemo((function(){return t&&"object"===Object(me.a)(t)?Object(he.a)(t,["expandable","rows"]):t}),[t]);return Object(se.a)("object"!==Object(me.a)(t)||!t||!("expandable"in t)&&!("rows"in t),"Typography.Text","`ellipsis` do not support `expandable` or `rows` props."),a.createElement(nt,Object(oe.a)({},n,{ellipsis:r,component:"span"}))},ot=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},lt=function(e,t){var n=e.ellipsis,r=e.rel,o=ot(e,["ellipsis","rel"]);Object(se.a)("object"!==Object(me.a)(n),"Typography.Link","`ellipsis` only supports boolean value.");var l=a.useRef(null);a.useImperativeHandle(t,(function(){var e;return null===(e=l.current)||void 0===e?void 0:e.contentRef.current}));var i=Object(oe.a)(Object(oe.a)({},o),{rel:void 0===r&&"_blank"===o.target?"noopener noreferrer":r});return delete i.navigate,a.createElement(nt,Object(oe.a)({},i,{ref:l,ellipsis:!!n,component:"a"}))},it=a.forwardRef(lt),ct=n("CWQg"),ut=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},st=Object(ct.b)(1,2,3,4,5),dt=function(e){var t,n=e.level,r=void 0===n?1:n,o=ut(e,["level"]);return-1!==st.indexOf(r)?t="h".concat(r):(Object(se.a)(!1,"Typography.Title","Title only accept `1 | 2 | 3 | 4 | 5` as `level` value. And `5` need 4.6.0+ version."),t="h1"),a.createElement(nt,Object(oe.a)({},o,{component:t}))},ft=function(e){return a.createElement(nt,Object(oe.a)({},e,{component:"div"}))},pt=be;pt.Text=rt,pt.Link=it,pt.Title=dt,pt.Paragraph=ft;var bt=pt,mt=function(){var e=(new Date).getTime(),t=a.useState(e),n=Object(m.a)(t,2),r=n[0],o=n[1],l=a.useContext(w.b),c=l.set_updated_by_not_older_than,u=l.update,s=l.set_update,d=Object(i.useRouter)().query;return a.useEffect((function(){var e=setInterval((function(){o((function(){return Math.round((new Date).getTime()/1e3)+2e4}))}),2e4);u||clearInterval(e)}),[u,d.run_number,d.dataset_name,d.folder_path,d.search_dataset_name,d.search_run_number]),a.useEffect((function(){u&&c(r)}),[r,u]),{not_older_than:r,set_update:s,update:u}},ht=a.createElement,vt=bt.Title,gt=function(e){var t=e.query,n=mt().not_older_than,r=a.useContext(w.b);return ht(a.Fragment,null,ht(g.d,{display:"flex",style:{alignItems:"center"}},$.b.map((function(e){var a=W(r,t,e.value,"HLT/EventInfo"),o=Object(_.a)(Object(j.f)(a),{},[t.dataset_name,t.run_number,n]),l=o.data,i=o.isLoading;return ht(g.h,{space:"8",width:"fit-content",color:y.a.colors.common.white,name:e.label,label:e.label},ht(vt,{level:4,style:{color:"white",display:"content"}},i?ht(O.a,{size:"small"}):Object(ee.e)(e,l)))}))))},yt=n("o0o1"),Ot=n.n(yt),_t=n("HaE+"),jt=n("Qyje"),wt=n.n(jt),St=n("Vl3Y"),Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.5 360.3a7.95 7.95 0 00-12.9 0l-178 246c-3.8 5.3 0 12.7 6.5 12.7H381c10.2 0 19.9-4.9 25.9-13.2L512 460.4l105.2 145.4c6 8.3 15.6 13.2 25.9 13.2H690c6.5 0 10.3-7.4 6.5-12.7l-178-246z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"up-circle",theme:"outlined"},kt=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:Et}))};kt.displayName="UpCircleOutlined";var Pt=a.forwardRef(kt),Ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"down-circle",theme:"outlined"},xt=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:Ct}))};xt.displayName="DownCircleOutlined";var Rt=a.forwardRef(xt),Tt=n("Nwzp"),Nt=n("BMrR"),Lt=r.a.createElement,Dt=function(e){var t=e.index,n=e.dataset,r=e.runs,o=e.handler,l=Object(a.useState)(!1),i=l[0],c=l[1],u=Object(a.useRef)(null);return Object(a.useEffect)((function(){}),[]),Lt(Tt.r,{expanded:i,index:t},Lt(Tt.p,{ref:u},Lt("div",null,n,i&&Lt(Tt.i,null,r.map((function(e){return Lt(Tt.n,{key:e},Lt(Tt.h,{onClick:function(){return o(e,n)},hover:"true"},Lt(Tt.l,null,e)))}))))),Lt(Tt.s,null,Lt(g.v,{onClick:function(){return c(!i)}},Lt(Nt.a,null,Lt(g.b,{space:"1"},r.length),Lt(g.b,{space:"1"},Lt(i?Pt:Rt,null))))))},zt=n("TjyM"),It=r.a.createElement,Mt=function(e){var t=e.handler,n=e.results_grouped,a=e.isLoading,o=e.errors,l=o&&o.length>0?o:[];return It(Tt.t,{overflowx:"hidden"},a?It(Tt.k,null,It(Tt.j,null)):It(r.a.Fragment,null,0!==n.length||a||0!==l.length?a||0!==l.length?!a&&l.length>0&&l.map((function(e){return It(Tt.m,{key:e,message:e,type:"error",showIcon:!0})})):It(Tt.o,null,It(Tt.q,null,It(Tt.r,{noHover:!0},It(Tt.p,null,"Dataset"),It(Tt.s,null,"Runs"))),It(Tt.u,null,n.map((function(e,n){var a=e.dataset,r=e.runs;return It(Dt,{key:a,index:n,handler:t,dataset:a,runs:r})})))):It(zt.a,null)))},qt=function(e,t){var n=!(!e&&!t),r=e||"",o=t||"",l=Object(a.useContext)(w.b).updated_by_not_older_than,i=Object(B.c)({dataset_name:o,run_number:r,notOlderThan:l,lumi:""}),c=Object(_.a)(i,{},[e,t,l],n),u=c.data,s=c.isLoading,d=c.errors,f=function(e){if(j.a.new_back_end.new_back_end)return e&&e.data;if(e){var t=e.samples;return t?t.reduce((function(e,t){var n=t.items;return[].concat(Object(S.a)(e),Object(S.a)(n))}),[]):[]}}(u);return n&&null!==u&&0!==f.lenght?{results_grouped:L.a.chain(f).sortBy("dataset").groupBy("dataset").map((function(e,t){var n=e.map((function(e){return e.run}));return n.sort((function(e,t){return e-t})),{dataset:t,runs:n}})).value(),searching:n,isLoading:s,errors:d}:{results_grouped:[],searching:n,isLoading:s,errors:d}},Ht=n("2fM7"),At=n("2/Rp"),Bt={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M689 165.1L308.2 493.5c-10.9 9.4-10.9 27.5 0 37L689 858.9c14.2 12.2 35 1.2 35-18.5V183.6c0-19.7-20.8-30.7-35-18.5z"}}]},name:"caret-left",theme:"filled"},Ft=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:Bt}))};Ft.displayName="CaretLeftFilled";var Vt=a.forwardRef(Ft),Ut={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"filled"},Wt=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:Ut}))};Wt.displayName="CaretRightFilled";var Jt=a.forwardRef(Wt),Kt=a.createElement,Gt=Ht.a.Option,Xt=function(e){var t=e.color,n=e.currentLumisection,r=e.handler,o=e.currentRunNumber,l=e.currentDataset,i=a.useState([{label:"All",value:0}]),c=Object(m.a)(i,2),s=c[0],d=c[1],f=(new Date).getTime(),p=a.useState(f),b=Object(m.a)(p,2),h=b[0],y=(b[1],Object(_.a)(Object(j.b)({run_number:o,dataset_name:l,lumi:-1,notOlderThan:h}),{},[o,l,h])),w=y.data,E=y.isLoading,k=(y.errors,w?w.data:[]);a.useEffect((function(){var e=k.length>0?k.map((function(e){return{label:e.lumi.toString(),value:e.lumi}})):[],t=Object(S.a)(s).concat(e);d(t)}),[k]);var P=s.map((function(e){return e.value})),C=-1===P.indexOf(n)?0:P.indexOf(n);return Kt(u.a,null,Kt(g.p,{labelcolor:t,name:"lumi",label:"Lumi"},Kt(Nt.a,{justify:"center",align:"middle"},Kt(u.a,null,Kt(At.a,{disabled:!s[C-1],icon:Kt(Vt,null),type:"link",onClick:function(){r(P[C-1])}})),Kt(u.a,null,Kt(v.j,{dropdownMatchSelectWidth:!1,value:P[C],onChange:function(e){r(parseInt(e))},showSearch:!0},s&&s.map((function(e){return Kt(Gt,{value:e.value,key:e.value.toString()},E?Kt(v.b,null,Kt(O.a,null)):Kt("p",null,e.label))})))),Kt(u.a,null,Kt(At.a,{icon:Kt(Jt,null),disabled:!s[C+1],type:"link",onClick:function(){r(P[C+1])}})))))},Yt=n("zbpD"),Qt=n.n(Yt),Zt=n("9yH6"),$t=r.a.createElement,en=function(e){var t=e.options,n=e.action,a=e.current_value,o=e.getOptionValue,l=e.getOptionLabel,i=e.radioColor,c=e.disabled,u=r.a.useState(a),s=Object(m.a)(u,2),d=s[0],f=s[1];return $t(Zt.a.Group,{onChange:function(e){n(e.target.value),f(e.target.value)},value:d,disabled:c},t.map((function(e){return $t(g.t,{color:i,key:e.label,value:o(e)},l(e))})))},tn=a.createElement,nn=[{value:!0,label:"Yes"},{value:!1,label:"No"}],an=function(e){var t=e.dataset_name,n=e.run_number,r=e.form,o=e.toggleRunInNewTab,l=e.openRunInNewTab,c=a.useContext(w.b),s=c.lumisection,d=c.setLumisection,f=Object(i.useRouter)().query;return tn(Qt.a,{form:r,onFinish:function(e){Object(B.a)(Object(B.d)(e,f))},fields:[{name:"dataset_name",value:t},{name:"run_number",value:n},{name:"lumi",value:s}]},tn("hr",null),tn(Nt.a,null,tn(g.p,{name:"dataset_name",label:"Dataset name"},tn(g.l,null,t))),tn(Nt.a,null,tn(g.p,{name:"run_number",label:"Run number"},tn(g.l,null,n))),j.a.new_back_end.lumisections_on&&tn(Nt.a,null,tn(u.a,null,tn(Xt,{color:"black",handler:function(e){d(e)},currentLumisection:s,currentDataset:t,currentRunNumber:n}))),tn("hr",null),tn(Nt.a,null,tn(g.p,{name:"open_in_a_new_a_tab",label:"Open in a new tab?"},tn(en,{options:nn,getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},current_value:l,action:function(e){o(e)}}))),tn("hr",null))},rn=n("l+S1"),on=r.a.createElement,ln=function(e){var t=e.onClick;return on(g.m,{htmlType:"submit",onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return t()})),shape:"circle",icon:on(rn.a,null)})},cn=r.a.createElement,un=function(){return cn(s.a,{title:"Search can be done by run number or by dataset name, or by both"},cn(g.s,null,cn(g.i,null)))},sn=r.a.createElement,dn=function(e){var t=e.initial_search_run_number,n=e.initial_search_dataset_name,r=e.setRunNumber,o=e.setDatasetName,l=e.handler,i=e.type,c=e.defaultRunNumber,u=e.defaultDatasetName,s=St.a.useForm(),d=Object(m.a)(s,1)[0],f=Object(a.useState)(t||""),p=f[0],b=f[1],h=Object(a.useState)(n||""),v=h[0],y=h[1];Object(a.useEffect)((function(){d.resetFields(),b(t||""),y(n||"")}),[t,n,d]);return sn("div",{style:{justifyContent:"center",width:"max-content"}},sn(g.d,Object(oe.a)({form:d,layout:"inline",justifycontent:"center"},{labelCol:{span:8},wrapperCol:{span:16}},{name:"search_form".concat(i),className:"fieldLabel",initialValues:{run_number:t,dataset_name:n},onFinish:function(){r&&r(p),o&&o(v)}}),sn(St.a.Item,null,sn(un,null)),sn(g.p,{name:"run_number"},sn(g.q,{id:"run_number",onChange:function(e){return b(e.target.value)},placeholder:"Enter run number",type:"text",name:"run_number",value:c})),"ONLINE"!==j.a.mode&&sn(g.p,{name:"dataset_name"},sn(g.q,{id:"dataset_name",placeholder:"Enter dataset name",onChange:function(e){return y(e.target.value)},type:"text",value:u})),sn(St.a.Item,null,sn(ln,{onClick:function(){return l(p,v)}}))))},fn=r.a.createElement,pn=function(e){window.open(e,"_blank")},bn=function(e){var t=e.setModalState,n=e.modalState,o=e.search_run_number,l=e.search_dataset_name,c=e.setSearchDatasetName,u=e.setSearchRunNumber,s=Object(i.useRouter)().query,d=s.dataset_name?s.dataset_name:"",f=Object(a.useState)(d),p=f[0],b=f[1],h=Object(a.useState)(!1),O=h[0],_=h[1],j=s.run_number?s.run_number:"",w=Object(a.useState)(j),S=w[0],E=w[1];Object(a.useEffect)((function(){var e=s.run_number?s.run_number:"",t=s.dataset_name?s.dataset_name:"";b(t),E(e)}),[s.dataset_name,s.run_number]);var k=function(){t(!1)},P=qt(o,l),C=P.results_grouped,x=P.searching,R=P.isLoading,T=P.errors,N=function(){var e=Object(_t.a)(Ot.a.mark((function e(){var t,n,a;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=7;break}t=D.getFieldsValue(),n=wt.a.stringify(Object(B.d)(t,s)),a=window.location.href.split("/?")[0],pn("".concat(a,"/?").concat(n)),e.next=9;break;case 7:return e.next=9,D.submit();case 9:k();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=St.a.useForm(),D=Object(m.a)(L,1)[0];return fn(v.i,{title:"Search data",visible:n,onCancel:function(){return k()},footer:[fn(g.m,{color:y.a.colors.secondary.main,background:"white",key:"Close",onClick:function(){return k()}},"Close"),fn(g.m,{key:"OK",onClick:N},"OK")]},n&&fn(r.a.Fragment,null,fn(dn,{initial_search_run_number:o,initial_search_dataset_name:l,defaultDatasetName:p,defaultRunNumber:S,handler:function(e,t){u(e),c(t)},type:"top"}),fn(an,{form:D,dataset_name:p,run_number:S,toggleRunInNewTab:_,openRunInNewTab:O}),x?fn(v.c,null,fn(Mt,{handler:function(e,t){b(t),E(e)},isLoading:R,results_grouped:C,errors:T})):fn(v.c,null)))},mn=n("B/o2"),hn=r.a.createElement,vn=Ht.a.Option,gn=function(e){var t=e.withoutArrows,n=e.setCurrentDataset,r=e.selectorWidth,o=e.query,l=e.current_dataset_name,i=e.current_run_number,c=Object(a.useState)(!1),s=c[0],d=c[1],f=Object(a.useState)(0),p=f[0],b=f[1],m=i||o.run_number,h=qt(m,""),y=h.results_grouped,_=h.isLoading,j=y.map((function(e){return e.dataset}));return Object(a.useEffect)((function(){var e=l||o.dataset_name;b(j.indexOf(e))}),[_,j]),hn(Nt.a,{justify:"center",align:"middle"},!t&&hn(u.a,null,hn(At.a,{disabled:!j[p-1],type:"link",icon:hn(Vt,null),onClick:function(){n(j[p-1])}})),hn(g.b,{width:r},hn("div",null,hn(v.j,{onChange:function(e){n(e)},value:j[p],dropdownMatchSelectWidth:!1,onClick:function(){return d(!s)},open:s,showSearch:!0},y.map((function(e){return hn(vn,{onClick:function(){d(!1)},value:e.dataset,key:e.dataset},_?hn(v.b,null,hn(O.a,null)):hn("p",null,e.dataset))}))))),!t&&hn(u.a,null,hn(At.a,{type:"link",disabled:!j[p+1],icon:hn(Jt,null),onClick:function(){n(j[p+1])}})))},yn=r.a.createElement,On=Ht.a.Option,_n=function(e){var t=e.setName,n=e.setGroupBy,r=e.resultsNames,o=e.restParts,l=e.part,i=e.name,c=e.setSelectedParts,u=e.selectedParts,s=e.selectedName,d=Object(a.useState)(i),f=d[0],p=d[1],b=Object(a.useState)(!1),m=b[0],h=b[1];return yn(v.j,{dropdownMatchSelectWidth:!1,defaultValue:i,selected:s===f?"selected":"",onChange:function(e){u[l]=e,c(u),n(l),p(e),t(e)},onClick:function(){return h(!m)},open:m},r.map((function(e){return yn(On,{value:e,key:e,onClick:function(){return h(!1)}},yn(g.r,{availability:"available"},e))})),o.map((function(e){return yn(On,{key:e,value:e},yn(g.r,null,e))})))},jn=function(e,t){var n=M(t),r=Object.keys(n).sort(),o=qt(e,"").results_grouped.map((function(e){return e.dataset})),l=r[0],i=Object(a.useState)(l),c=i[0],u=i[1],s=Object(a.useState)(n[l]),d=s[0],f=s[1],p=Object(a.useState)(M(t)),b=p[0],m=p[1],h=H(o,c),v=Object.values(b);v.unshift("");var g=v.join("/"),y=o.includes(g);return{availableAndNotAvailableDatasetParts:r.map((function(e){var t=function(e,t,n){var a=e[t]?L.a.uniq(e[t].map((function(e){return e[n]}))):[];return 1===a.length&&a[0]===t?Object.keys(e):a}(h,d,e),n=function(e,t,n){return Object.keys(H(t,n)).filter((function(t){return!e.includes(t)}))}(t,o,e);return Object(D.a)({},e,{availableChoices:t,notAvailableChoices:n})})),setSelectedParts:m,selectedParts:b,setLastSelectedDatasetPartValue:f,lastSelectedDatasetPartValue:d,setLastSelectedDatasetPartPosition:u,doesCombinationOfSelectedDatasetPartsExists:y,fullDatasetName:g}},wn=r.a.createElement,Sn=function(e){var t=e.currentDataset,n=e.query,r=e.currentRunNumber,o=jn(r,t),l=o.availableAndNotAvailableDatasetParts,i=o.setSelectedParts,c=o.selectedParts,s=o.setLastSelectedDatasetPartValue,d=o.lastSelectedDatasetPartValue,f=o.setLastSelectedDatasetPartPosition,p=o.doesCombinationOfSelectedDatasetPartsExists,b=o.fullDatasetName;return Object(a.useEffect)((function(){p&&Object(B.a)(Object(B.d)({dataset_name:b},n))}),[b]),wn(Nt.a,null,l.map((function(e){var t=Object.keys(e)[0];return wn(u.a,null,wn(_n,{restParts:e[t].notAvailableChoices,part:t,resultsNames:e[t].availableChoices,setGroupBy:f,setName:s,selectedName:d,name:c[t],setSelectedParts:i,selectedParts:c}))})),wn(u.a,null,wn(p?g.w:g.o,null)))},En=r.a.createElement,kn=Ht.a.Option,Pn=function(e){var t=e.query,n=e.setCurrentRunNumber,r=e.withoutArrows,o=e.withoutLabel,l=e.current_run_number,i=e.current_dataset_name,c=Object(a.useState)(!1),s=c[0],d=c[1],f=Object(a.useRef)(null),p=Object(a.useState)(0),b=(p[0],p[1]);Object(a.useEffect)((function(){f.current&&f.current.clientWidth&&b(f.current.clientWidth)}),[]);var m=Object(a.useState)(0),h=m[0],y=m[1],_=i||t.dataset_name,j=qt("",_),w=j.results_grouped,S=j.isLoading,E=w[0]?w[0].runs.map((function(e){return e.toString()})):[];return Object(a.useEffect)((function(){var e=l?l.toString():t.run_number;y(E.indexOf(e))}),[E,S]),En(u.a,null,En(g.p,{labelcolor:"white",name:"dataset_name",label:"".concat(o?"":"Run")},En(Nt.a,{justify:"center",align:"middle"},!r&&En(u.a,null,En(At.a,{disabled:!E[h-1],icon:En(Vt,null),type:"link",onClick:function(){n(E[h-1])}})),En(u.a,null,En("div",{ref:f},En(v.j,{width:"100px",onClick:function(){return d(!s)},value:E[h],onChange:function(e){n(e),d(!s)},showSearch:!0,open:s},E&&E.map((function(e){return En(kn,{onClick:function(){d(!1)},value:e,key:e.toString()},S?En(v.b,null,En(O.a,null)):En("div",null,e))}))))),!r&&En(u.a,null,En(At.a,{icon:En(Jt,null),disabled:!E[h+1],type:"link",onClick:function(){n(E[h+1])}})))))},Cn=n("BvKs"),xn=n("jsC+"),Rn=n("8Skl"),Tn=r.a.createElement,Nn=function(e){var t=e.options,n=e.defaultValue,r=e.action,o=Object(a.useState)(n),l=o[0],i=o[1];return Tn(Nt.a,null,Tn(u.a,null,Tn(xn.a,{overlay:function(e,t){return Tn(Cn.a,null,e.map((function(e){return Tn(Cn.a.Item,{key:e.value,onClick:function(){r&&r(e.value),i(e)}},Tn("div",null,e.label))})))}(t),trigger:["hover"]},Tn("a",{style:{color:"white"}},l.label," ",Tn(Rn.a,null)," "))))},Ln=r.a.createElement,Dn=function(){var e=Object(a.useState)($.a[0].value),t=e[0],n=e[1],o=Object(i.useRouter)().query,l=o.run_number?o.run_number:"",c=o.dataset_name?o.dataset_name:"",u=o.lumi?parseInt(o.lumi):NaN,s=r.a.useContext(w.b).setLumisection,d=Object(a.useState)(l),f=d[0],p=d[1],b=Object(a.useState)(c),m=b[0],h=b[1];return f===o.run_number&&m===o.dataset_name||Object(B.a)(Object(B.d)({run_number:f,dataset_name:m},o)),Ln(Qt.a,null,Ln(mn.n,null,Ln(mn.n,null,Ln(Pn,{query:o,setCurrentRunNumber:p})),Ln(mn.n,null,j.a.new_back_end.lumisections_on&&Ln(Xt,{currentLumisection:u,currentRunNumber:f,currentDataset:m,handler:function(e){Object(B.a)(Object(B.d)({lumi:e},o)),s(e)},color:"white"})),"ONLINE"!==j.a.mode&&Ln(g.p,{labelcolor:"white",label:Ln(Nn,{options:$.a,action:n,defaultValue:$.a[0]})},t===$.a[0].value?Ln(mn.n,null,Ln(gn,{setCurrentDataset:h,query:o})):Ln(mn.n,null,Ln(Sn,{currentRunNumber:f,currentDataset:m,query:o})))))},zn=a.createElement,In=function(){var e=Object(i.useRouter)().query,t=e.run_number?e.run_number:"",n=a.useState(t),r=Object(m.a)(n,2),o=r[0],l=r[1],c=a.useState(e.dataset_name),u=Object(m.a)(c,2),s=u[0],d=u[1],f=a.useState(!1),p=Object(m.a)(f,2),b=p[0],h=p[1];return a.useEffect((function(){if(b){var t=e.run_number?e.run_number:"";d(e.dataset_name),l(t)}}),[b]),zn(g.b,{display:"flex",alignitems:"center"},zn(bn,{modalState:b,setModalState:h,setSearchRunNumber:l,setSearchDatasetName:d,search_run_number:o,search_dataset_name:s}),zn(g.e,{width:"fit-content"},zn(Dn,null),zn(ln,{onClick:function(){return h(!0)}})))},Mn=a.createElement,qn=function(){var e=Object(i.useRouter)().query,t="0"===e.run_number&&"/Global/Online/ALL"===e.dataset_name;return Mn(g.e,{alignitems:"center"},t?Mn(gt,{query:e}):Mn(In,null))},Hn=a.createElement,An=function(e){var t=e.isDatasetAndRunNumberSelected,n=e.query;return Hn(u.a,{style:{width:"100%"}},t?Hn(u.a,{style:{display:"flex",alignItems:"center",width:"100%"}},Hn(u.a,{style:{display:"flex",alignItems:"center",float:"left",padding:8}},Hn(re,{query:n}),Hn(qn,null))):Hn(a.Fragment,null,Hn(dn,{initial_search_run_number:n.search_run_number,initial_search_dataset_name:n.search_dataset_name,handler:b,type:"top"})))},Bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},Fn=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:Bn}))};Fn.displayName="SettingOutlined";var Vn=a.forwardRef(Fn),Un={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},Wn=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:Un}))};Wn.displayName="FullscreenOutlined";var Jn=a.forwardRef(Wn),Kn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M856 376H648V168c0-8.8-7.2-16-16-16H168c-8.8 0-16 7.2-16 16v464c0 8.8 7.2 16 16 16h208v208c0 8.8 7.2 16 16 16h464c8.8 0 16-7.2 16-16V392c0-8.8-7.2-16-16-16zm-480 16v188H220V220h360v156H392c-8.8 0-16 7.2-16 16zm204 52v136H444V444h136zm224 360H444V648h188c8.8 0 16-7.2 16-16V444h156v360z"}}]},name:"block",theme:"outlined"},Gn=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:Kn}))};Gn.displayName="BlockOutlined";var Xn=a.forwardRef(Gn),Yn=function(e){return"onSide"===e.overlay?Object(j.h)(e):Object(j.i)(e)},Qn=n("Ff2n"),Zn=n("YFqc"),$n=n.n(Zn),ea=a.createElement,ta=function(e){var t=e.options;Object(Qn.a)(e,["options"]);return ea(Nt.a,null,ea(u.a,null,ea(xn.a,{overlay:function(e){return ea(Cn.a,null,e.map((function(e){return"overlay"===e.value?ea(Cn.a.Item,{icon:e.icon},ea($n.a,{href:e.url},ea("a",{target:"_bank"},e.label))):ea(Cn.a.Item,{icon:e.icon,key:e.value,onClick:function(){e.action&&e.action(e.value)}},e.label)})))}(t),trigger:["hover"]},ea(At.a,{type:"link"},"More ",ea(Rn.a,null)))))},na=n("DZMr"),aa=function(e){var t=e.setIsPortalWindowOpen,n=e.children,r=e.title,o=Object(a.useState)(document.createElement("div"))[0],l=null;return Object(a.useEffect)((function(){var e,n;return(l=window.open("","")).document.title=r,null===(e=l)||void 0===e||e.document.body.appendChild(o),null===(n=l)||void 0===n||n.addEventListener("beforeunload",(function(){t(!1)})),function(){var e;null===(e=l)||void 0===e||e.close(),l=null}}),[]),Ge.a.createPortal(n,o)},ra=a.createElement,oa=function(e){var t=e.isPortalWindowOpen,n=e.setIsPortalWindowOpen,r=e.children,o=e.title;return ra(a.Fragment,null,t&&ra(aa,{setIsPortalWindowOpen:n,title:o},ra("div",null,r)))},la=function(){var e=a.useContext(w.b).updated_by_not_older_than,t=a.useState(e),n=Object(m.a)(t,2),r=n[0],o=n[1];return a.useEffect((function(){setTimeout((function(){o(!0)}),0),setTimeout((function(){o(!1)}),2e3)}),[e]),{blink:r,updated_by_not_older_than:e}},ia=a.createElement,ca=bt.Text,ua=function(){return ia(g.c,{width:"100%",height:"100%",display:"flex",justifycontent:"center"},ia(ca,{type:"danger",strong:!0},"Failed to load"))},sa=n("9L/e"),da=a.createElement,fa=function(e){var t=e.imageRef,n=e.query,r=e.isPlotSelected,o=e.params_for_api,l=e.plotURL,i=e.updated_by_not_older_than,c=e.blink,u=e.plot,s=a.useState("".concat(j.p).concat(l,";notOlderThan=").concat(i)),d=Object(m.a)(s,2),f=d[0],p=d[1],b=a.useState("".concat(j.p).concat(l,";notOlderThan=").concat(i)),h=Object(m.a)(b,2),v=h[0],g=h[1],y=a.useState(!0),O=Object(m.a)(y,2),_=O[0],w=O[1],S=a.useState(!1),E=Object(m.a)(S,2),k=E[0],P=E[1];a.useEffect((function(){p("".concat(j.p).concat(l,";notOlderThan=").concat(i)),w(c)}),[i,o.customizeProps,o.height,o.width,o.run_number,o.dataset_name,o.lumi,o.normalize,o.overlay_plot,o.plot_name,o.folders_path,o.overlay_plot,o.joined_overlaied_plots_urls,l,c]);var C=_?"":"none",x=_?"none":"";return da(a.Fragment,null,k?da(ua,null):da("div",{onClick:Object(_t.a)(Ot.a.mark((function e(){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}if(!r){e.next=6;break}return e.next=4,K(n,u);case 4:e.next=8;break;case 6:return e.next=8,J(n,u);case 8:scroll(t);case 9:case"end":return e.stop()}}),e)})))},!k&&da(a.Fragment,null,da(sa.a,{retryTimes:3,style:{display:x},onLoad:function(){g(f),w(!1)},alt:u.name,src:f,setImageError:P,width:o.width,height:o.height}),da(sa.a,{retryTimes:3,style:{display:C},alt:u.name,src:v,setImageError:P,width:"auto",height:"auto"}))))},pa=r.a.createElement;function ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var ma=function(e){var t,n,o=e.selected_plot,l=e.params_for_api,c=Object(a.useState)(),u=c[0],s=c[1],d=Object(a.useState)(!1),f=d[0],p=d[1];l.customizeProps=u;var b=r.a.useState(!1),h=Object(m.a)(b,2),v=h[0],g=h[1],y=Object(i.useRouter)(),O=y.query,_=Object(ee.c)(y.basePath,O,o),w=[{label:"Open in a new tab",value:"open_in_a_new_tab",action:function(){return g(!0)},icon:pa(Jn,null)},{label:"Customize",value:"Customize",action:function(){return p(!0)},icon:pa(Vn,null)},j.a.new_back_end.new_back_end&&{label:"Overlay with another plot",value:"overlay",url:_,icon:pa(Xn,null)}],S=Object(j.g)(l).join("");l.joined_overlaied_plots_urls=S;var E=Yn(l),k=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(n),!0).forEach((function(t){Object(D.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ba(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l);k.height=window.innerHeight,k.width=Math.round(1.33*window.innerHeight);var P=Yn(k),C=la(),x=C.blink,R=C.updated_by_not_older_than;return pa(mn.k,{space:2},pa(oa,{isPortalWindowOpen:v,setIsPortalWindowOpen:g,title:o.name},pa(mn.l,{justifycontent:"center",isLoading:x.toString(),animation:("ONLINE"===j.a.mode).toString(),minheight:k.height,width:null===(t=k.width)||void 0===t?void 0:t.toString(),is_plot_selected:(!0).toString(),nopointer:(!0).toString()},pa(mn.h,{error:Y(o).toString()},o.name),pa(mn.e,{id:o.name,width:k.width,height:k.height},pa(fa,{blink:x,params_for_api:k,plot:o,plotURL:P,query:O,updated_by_not_older_than:R})))),pa(na.a,{plot_name:o.name,open:f,onCancel:function(){return p(!1)},setCustomizationParams:s}),pa(mn.l,{isLoading:x.toString(),animation:("ONLINE"===j.a.mode).toString(),minheight:l.height,width:null===(n=l.width)||void 0===n?void 0:n.toString(),is_plot_selected:(!0).toString(),nopointer:(!0).toString(),justifycontent:"center"},pa(mn.h,{error:Y(o).toString()},o.name),pa(mn.a,{display:"flex"},pa(ta,{options:w}),pa(mn.f,{onClick:function(){return K(O,o)}})),pa(mn.e,{id:o.name,width:l.width,height:l.height},pa(fa,{blink:x,params_for_api:l,plot:o,plotURL:E,query:O,updated_by_not_older_than:R}))))},ha=r.a.createElement;function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var ga=function(){var e=Object(_t.a)(Ot.a.mark((function e(t,n,a){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSROOT.cleanup("".concat(t).concat(n));case 2:JSROOT.draw("".concat(t).concat(n),JSROOT.parse(JSON.stringify(a)),"".concat(t));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ya=function(e){var t,n=e.selected_plot,o=e.params_for_api,l=e.id,c=Object(i.useRouter)().query,u=Object(_.a)(Object(j.f)(o),{},[n.name]).data,s=null!==o&&void 0!==o&&o.overlay_plot?o.overlay_plot.map((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){Object(D.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o);return e.dataset_name&&(t.dataset_name=e.dataset_name),t.run_number=e.run_number,Object(_.a)(Object(j.f)(t),{},[n.name,c.lumi]).data})):[];s.push(u);var d={};if(0===s.length)return null;if(1===s.length){var f=s[0];d=JSROOT.CreateTHStack(f)}else if(2===s.length){var b=s[0],m=s[1];d=JSROOT.CreateTHStack(b,m)}else if(3===s.length){var h=s[0],v=s[1],g=s[2];d=JSROOT.CreateTHStack(h,v,g)}else if(4===s.length){var y=s[0],O=s[1],S=s[2],E=s[3];d=JSROOT.CreateTHStack(y,O,S,E)}var k=r.a.useContext(w.b).updated_by_not_older_than,P=o.normalize?"hist":"nostack";Object(a.useEffect)((function(){p()(d.fHists.arr).length===d.fHists.arr.length&&ga(P,l,d)}),[k,u,o.lumi,o.overlay_plot,o.dataset_name,o.run_number,o.normalize,d.fHists.arr]);var C=la().blink;return ha(mn.k,{space:2},ha(mn.l,{isLoading:C.toString(),animation:("ONLINE"===j.a.mode).toString(),minheight:o.height,width:null===(t=o.width)||void 0===t?void 0:t.toString(),is_plot_selected:(!0).toString(),nopointer:(!0).toString(),justifycontent:"center"},ha(mn.h,{error:Y(n).toString()},n.name),ha(mn.a,null,ha(At.a,{type:"link",onClick:function(){return K(c,n)},icon:ha(mn.f,null)})),ha(mn.e,{style:{display:o.normalize?"":"none"},id:"hist".concat(l),width:o.width,height:o.height}),ha(mn.e,{style:{display:o.normalize?"none":""},id:"nostack".concat(l),width:o.width,height:o.height})))},Oa=r.a.createElement,_a=function(e){var t=e.selected_plots,n=Object(a.useContext)(w.b),r=Object(i.useRouter)().query;return Oa(g.x,null,t.map((function(e){var t=W(n,r,e.name,e.path,!0);if(n.JSROOTmode){var a=Object(ee.f)();return Oa(ya,{selected_plot:e,params_for_api:t,key:e.name,id:a})}return Oa(ma,{selected_plot:e,params_for_api:t,key:e.name})})))},ja=r.a.createElement;function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Sa=function(e){var t,n,r=e.selected_plot,o=e.params_for_api,l=Object(a.useState)(),c=l[0],u=l[1],s=Object(a.useState)(!1),d=s[0],f=s[1],p=Object(a.useState)(!1),b=p[0],m=p[1];o.customizeProps=c;var h=Object(j.h)(o),v=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){Object(D.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o);v.height=window.innerHeight,v.width=Math.round(1.33*window.innerHeight);var g=Object(j.h)(v),y=Object(i.useRouter)(),O=y.query,_=Object(ee.d)(y.basePath,O,r),w=[{label:"Open in a new tab",value:"open_in_a_new_tab",action:function(){return m(!0)},icon:ja(Jn,null)},{label:"Customize",value:"customize",action:function(){return f(!0)},icon:ja(Vn,null)},j.a.new_back_end.new_back_end&&{label:"Overlay with another plot",value:"overlay",url:_,icon:ja(Xn,null)}],S=la(),E=S.blink,k=S.updated_by_not_older_than;return ja(mn.k,{space:2},ja(oa,{isPortalWindowOpen:b,setIsPortalWindowOpen:m,title:r.name},ja(mn.l,{isLoading:E.toString(),animation:("ONLINE"===j.a.mode).toString(),minheight:v.height,width:null===(t=v.width)||void 0===t?void 0:t.toString(),is_plot_selected:(!0).toString(),nopointer:(!0).toString()},ja(mn.h,{error:Y(r).toString()},r.name),ja(mn.e,{id:r.name,width:v.width,height:v.height},ja(fa,{blink:E,params_for_api:v,plot:r,plotURL:g,query:O,updated_by_not_older_than:k})))),ja(na.a,{plot_name:r.name,open:d,onCancel:function(){return f(!1)},setCustomizationParams:u}),ja(mn.l,{isLoading:E.toString(),animation:("ONLINE"===j.a.mode).toString(),minheight:o.height,width:null===(n=o.width)||void 0===n?void 0:n.toString(),is_plot_selected:(!0).toString(),nopointer:(!0).toString()},ja(mn.h,{error:Y(r).toString()},r.name),ja(mn.a,{display:"flex"},ja(ta,{options:w}),ja(mn.f,{onClick:function(){return K(O,r)}})),ja(mn.e,{alignitems:"center",id:r.name,width:o.width,height:o.height,display:"flex"},ja(fa,{updated_by_not_older_than:k,blink:E,params_for_api:o,plot:r,plotURL:h,query:O}))))},Ea=r.a.createElement,ka=function(){var e=Object(_t.a)(Ot.a.mark((function e(t,n){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!document.getElementById(t)){e.next=4;break}return e.next=3,JSROOT.cleanup(t);case 3:JSROOT.draw(t,JSROOT.parse(JSON.stringify(n)),"hist");case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pa=function(e){var t,n=e.selected_plot,o=e.params_for_api,l=e.id,c=Object(i.useRouter)().query,u=Object(_.a)(Object(j.f)(o),{},[n.name,o.lumi]).data,s=r.a.useContext(w.b).updated_by_not_older_than;Object(a.useEffect)((function(){document.getElementById("".concat(l))&&ka("".concat(l),u)}),[u,o.lumi,s]);var d=la().blink;return Ea(mn.k,{space:2},Ea(mn.l,{isLoading:d.toString(),animation:("ONLINE"===j.a.mode).toString(),minheight:o.height,width:null===(t=o.width)||void 0===t?void 0:t.toString(),is_plot_selected:(!0).toString(),nopointer:(!0).toString()},Ea(mn.h,{error:Y(n).toString()},n.name),Ea(mn.a,null,Ea(At.a,{type:"link",onClick:function(){return K(c,n)},icon:Ea(mn.f,null)})),Ea(mn.e,{id:"".concat(l),width:o.width,height:o.height})))},Ca=r.a.createElement,xa=function(e){var t=e.selected_plots,n=Object(a.useContext)(w.b),r=Object(i.useRouter)().query;return Ca(g.x,null,t.map((function(e){var t=W(n,r,e.name,e.path,!0);if(n.JSROOTmode){var a=Object(ee.f)();return Ca(Pa,{selected_plot:e,params_for_api:t,key:e.name,id:a})}return Ca(Sa,{selected_plot:e,params_for_api:t,key:e.name})})))},Ra=r.a.createElement,Ta=function(e){var t=e.selected_plots,n=Object(i.useRouter)().query,r=Object(a.useContext)(w.b).setImageRefScrollDown,o=Object(a.useRef)(null);Object(a.useEffect)((function(){r(o)}),[]);var l=n.overlay_data;return Ra("div",{style:{width:"100%",height:"100%",overflow:"scroll"},ref:o},Ra(l?_a:xa,{selected_plots:t}))},Na=n("gK9i"),La=n("Sdc0"),Da=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=Object(i.useRouter)(),o=r.query,l=Object(B.d)(e,o),u=wt.a.stringify(l,{});a.useEffect((function(){n&&c.a.push({pathname:"/",query:l,path:decodeURIComponent(u)})}),t)},za=r.a.createElement,Ia=Ht.a.Option,Ma=function(){var e=Object(i.useRouter)().query,t=e.overlay?e.overlay:$.c[0].value,n=Object(a.useContext)(w.b).setOverlaiPosition,o=r.a.useState(t),l=Object(m.a)(o,2),c=l[0],u=l[1];return Da({overlay:c},[],!0),Da({overlay:c},[c],!0),Object(a.useEffect)((function(){n(c)}),[c]),za(v.j,{onChange:function(e){u(e)},value:t},$.c.map((function(e){return za(Ia,{value:e.value,key:e.toString()},za("div",null,e.label))})))},qa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},Ha=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:qa}))};Ha.displayName="PlusOutlined";var Aa=a.forwardRef(Ha),Ba={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},Fa=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:Ba}))};Fa.displayName="MinusOutlined";var Va=a.forwardRef(Fa),Ua=a.createElement,Wa=function(e){var t=e.open,n=e.toggleModal,r=e.triples,o=e.setTriples,l=a.useState(""),c=Object(m.a)(l,2),u=c[0],s=c[1],d=a.useState(""),f=Object(m.a)(d,2),p=f[0],b=f[1],h=a.useState([]),O=Object(m.a)(h,2),_=O[0],j=O[1],w=qt(u,p),E=w.results_grouped,k=w.searching,P=w.isLoading,C=w.errors,x=function(e){var t=[];return e.forEach((function(e){t=t.concat(e)})),t}([_,r]),R=Object(i.useRouter)().query;return Ua(v.i,{title:"Set Runs",visible:t,onCancel:function(){n(!1),j([])},footer:[Ua(g.m,{color:y.a.colors.secondary.main,background:"white",key:"Close",onClick:function(){n(!1),j([])}},"Close"),Ua(g.m,{key:"OK",onClick:function(){Object(B.a)(Object(B.d)({overlay_data:"".concat(U(x))},R)),o(x),n(!1),j([])}},"OK")]},Ua("div",null,x.length>0&&Ua(v.d,null,Ua("thead",null,Ua(v.g,null,Ua(v.f,null,"Nr."),Ua(v.f,null,"Run"),Ua(v.f,null,"Dataset name"),Ua(v.f,null,"Action"))),Ua("tbody",null,x.map((function(e,t){return Ua(v.g,null,Ua(v.e,null,t+1,"."),Ua(v.e,null,e.run_number),Ua(v.e,null,e.dataset_name),Ua(v.e,null,Ua(g.v,{onClick:function(){!function(e){var t=Object(S.a)(_),n=t.findIndex((function(t){return t.id===e}));-1!==n&&(t.splice(n,1),j(t))}(e.id)},icon:Ua(Va,null)})))})))),Ua("div",null,Ua(dn,{handler:function(e,t){s(e),b(t)},setRunNumber:s,setDatasetName:b,type:"overlay"}),t&&k?Ua(v.c,null,Ua(Mt,{handler:function(e,t){var n={id:T(),run_number:e,dataset_name:t,checked:!0,label:""},a=Object(S.a)(_);a.length<=4&&a.push(n),j(a)},isLoading:P,results_grouped:E,errors:C})):Ua(v.c,null))))},Ja=n("kaz8"),Ka=r.a.createElement,Ga=function(e){e.removeRun;var t=e.id,n=e.field_name,a=e.value,r=e.placeholder,o=e.disabled,l=e.defaultValue,i=e.triples,c=e.change_run_details,u=a||l;return Ka(g.p,{name:"".concat(t,"_").concat(n)},Ka(g.q,{disabled:o,onChange:function(e){A(e.target.value,"label",t,i,c)},value:u,defaultValue:u,placeholder:r}))},Xa=a.createElement,Ya=function(e){var t=e.triples,n=e.query,a=e.change_run_details,r=e.remove_runs_to_set_runs_for_overlay;return Xa("table",null,t.map((function(e,o){return Xa("tr",null,Xa(g.f,{spacing:"4"},Xa(Ja.a,{checked:e.checked,onChange:function(n){A(e.cheked?e.cheked:n.target.checked,"checked",e.id,t,a)}})),Xa(g.f,{spacing:"4"},o+1,"."),Xa(g.f,{spacing:"4"},Xa(Pn,{query:n,withoutLabel:!0,setCurrentRunNumber:function(n){A(n,"run_number",e.id,t,a)},current_run_number:e.run_number,current_dataset_name:e.dataset_name,withoutArrows:!0})),Xa(g.f,{spacing:"4"},Xa(gn,{query:n,selectorWidth:"100%",setCurrentDataset:function(n){A(n,"dataset_name",e.id,t,a)},withoutArrows:!0,current_dataset_name:e.dataset_name,current_run_number:e.run_number})),Xa(g.f,{spacing:"4"},Xa(Ga,{triples:t,change_run_details:a,removeRun:r,id:e.id,field_name:"label",placeholder:"label",defaultValue:e.label,value:e.label})),Xa(g.f,{spacing:"4"},Xa(g.v,{onClick:function(){r(e.id)},icon:Xa(Va,null)})))})))},Qa=r.a.createElement,Za=function(e){var t,n=e.overlaid_runs,r=e.query,o=Object(a.useContext)(w.b),l=o.runs_set_for_overlay,i=o.set_runs_set_for_overlay,c=o.setTriples,u=o.triples,d=Object(a.useState)(!1),f=d[0],p=d[1];return Qa(g.c,{style:{overflowX:"auto"}},Qa(Wa,{open:f,toggleModal:p,overlaid_runs:n,setTriples:c,triples:u,set_runs_set_for_overlay:i}),Qa(Ya,{triples:u,query:r,change_run_details:function(e){return(t=e,function(){var e=Object(_t.a)(Ot.a.mark((function e(n,a){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.a)(Object(B.d)({overlay_data:"".concat(U(t))},a));case 2:n(t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())(c,r);var t},setTriples:c,remove_runs_to_set_runs_for_overlay:function(e){return function(e){return function(){var t=Object(_t.a)(Ot.a.mark((function t(n,a,r){var o,l;return Ot.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=Object(S.a)(n),-1!==(l=o.findIndex((function(t){return t.id===e})))&&(o.splice(l,1),Object(B.a)(Object(B.d)({overlay_data:"".concat(U(o))},r)),a(o));case 3:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()}(e)(u,c,r)}}),Qa(Nt.a,{justify:"space-between",style:{height:48,padding:8}},Qa(g.c,{position:"fixed",display:"flex"},Qa(g.b,{space:"2"},Qa(s.a,{title:(t=n.length>=4||l.length>=4,t?"Maximum 4 plots could be overlaid!":"")},Qa(g.v,{disabled:n.length>=4||l.length>=4,onClick:function(){p(!0)},icon:Qa(Aa,null)},"SET RUNS"))))))},$a=n("jcFm"),er=n.n($a),tr=r.a.createElement,nr=function(){var e=Object(a.useContext)(w.b),t=e.normalize,n=e.setNormalize,r=e.triples,o="True"===t,l=Object(a.useState)(o),c=l[0],s=l[1],d=Object(i.useRouter)().query;return Object(a.useEffect)((function(){n(c?"True":"False")}),[c]),tr(g.n,null,tr(g.e,null,tr(g.b,{space:"2"}),tr(g.b,{space:"2"},tr(er.a,{name:"OverlayPosition",label:"Position:"},tr(Ma,null))),tr(g.b,{space:"2"},tr(er.a,null,tr(g.a,{onClick:function(){var e=Object(_t.a)(Ot.a.mark((function e(t){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t.target.checked);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),checked:c},"Normalize"))),tr(u.a,null)),tr(Za,{overlaid_runs:r,query:d}))},ar=r.a.createElement,rr=function(e){var t=e.setSize,n=e.currentValue,r=e.disabled,o=e.plotsAreaWidth;return Object(a.useEffect)((function(){return function(){return t(n)}}),[]),ar(en,{disabled:r,current_value:n,getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},action:function(e){if(e.w===$.f.fill.size.w&&e.h===$.f.fill.size.h){var n=e.w/e.h,a=Math.floor(o/n)-48;t({h:a,w:o-48})}else t(e)},options:Object.keys($.f).map((function(e){return{label:$.f[e].label,value:$.f[e].size}}))})},or=r.a.createElement,lr=Na.a.Panel,ir=function(e){var t=e.selected_plots,n=e.plotsAreaWidth,r=Object(i.useRouter)().query,o=Object(a.useContext)(w.b),l=o.size,c=o.setSize,u=o.setJSROOTmode,s=o.JSROOTmode,d=o.rightSideSize,f=o.setRightSideSize,p=o.setTriples;return Object(a.useEffect)((function(){if(r&&r.overlay_data){var e=q(r.overlay_data);p(e)}return function(){p([]),u(!1)}}),[]),or(v.h,{style:{width:"100%"}},or(lr,{header:"Options",key:"1"},or(St.a,null,or(g.c,{display:"flex",justifycontent:"space-between",width:"100%"},or(g.h,{name:"SizeChanger",label:"Left side size",width:"50%"},or(rr,{plotsAreaWidth:n,currentValue:l,setSize:c})),or(g.h,{name:"SizeChanger",label:"Right side size",width:"50%"},or(rr,{plotsAreaWidth:n,currentValue:d,setSize:f,disabled:!t}))),or("hr",null),or(g.c,{display:"flex",justifycontent:"flex-end",width:"100%"},or(g.h,{name:"Jsroot",label:"JSROOT",width:"50%",display:"flex",justifycontent:"flex-end"},or(La.a,{style:{width:"fit-content"},checkedChildren:"JSROOT enabled",unCheckedChildren:"JSROOT disabled",disabled:!t,checked:s,onChange:function(e){u(e)}}))),or("hr",null),or(g.h,{name:"Reference",label:"Reference"},or(nr,null)))))},cr=n("8L4l"),ur=n("dTAC"),sr=[{label:"Summaries",workspaces:[{label:"Summary",foldersPath:[]},{label:"Shift",foldersPath:["00 Shift"]},{label:"Info",foldersPath:["Info"]},{label:"Everything",foldersPath:[]}]},{label:"Trigger",workspaces:[{label:"L1T",foldersPath:["L1T"]},{label:"L1TEMU",foldersPath:["L1TEMU"]},{label:"HLT",foldersPath:["HLT"]}]},{label:"Tracker",workspaces:[{label:"PixelPhase1",foldersPath:["PixelPhase1"]},{label:"Pixel",foldersPath:["Pixel"]},{label:"SiStrip",foldersPath:["SiStrip"]}]},{label:"Calorimeters",workspaces:[{label:"Ecal",foldersPath:["Ecal","EcalBarrel","EcalEndcap"]},{label:"EcalPreshower",foldersPath:["EcalPreshower"]},{label:"HCAL",foldersPath:["Hcal","Hcal2"]},{label:"HCALcalib",foldersPath:["HcalCalib"]},{label:"Castor",foldersPath:["Castor"]}]},{label:"Muons",workspaces:[{label:"CSC",foldersPath:["CSC"]},{label:"DT",foldersPath:["DT"]},{label:"RPC",foldersPath:["RPC"]}]},{label:"CTPPS",workspaces:[{label:"TrackingStrip",foldersPath:["CTPPS/TrackingStrip","CTPPS/common"]},{label:"TrackingPixel",foldersPath:["CTPPS/TrackingPixel","CTPPS/common"]},{label:"TimingDiamond",foldersPath:["CTPPS/TimingDiamond","CTPPS/common"]},{label:"TimingFastSilicon",foldersPath:["CTPPS/TimingFastSilicon","CTPPS/common"]}]},{label:"POG",workspaces:[{label:"Muons",foldersPath:["Muons"]},{label:"JetMet",foldersPath:["JetMet"]},{label:"EGamma",foldersPath:["Egamma"]},{label:"Btag",foldersPath:["Btag"]},{label:"Tracking",foldersPath:["Tracking","AlcaBeamMonitor","OfflinePV"]},{label:"Tau",foldersPath:["RecoTauV"]}]}],dr=function(e,t){var n=a.useState(e),r=Object(m.a)(n,2),o=r[0],l=r[1];return a.useEffect((function(){l(e)}),[e]),a.useEffect((function(){l(t)}),[t]),o},fr=function(e,t,n){var r=a.useState([]),o=Object(m.a)(r,2),l=o[0],c=o[1],u=a.useState([]),s=Object(m.a)(u,2),d=s[0],f=s[1],b=a.useState([]),h=Object(m.a)(b,2),v=h[0],g=h[1],y=a.useState([]),O=Object(m.a)(y,2),w=O[0],S=O[1],E=a.useState(!1),k=Object(m.a)(E,2),P=k[0],C=k[1],x=Object(B.b)(t),R=Object(_.a)(x,{},[n],j.a.mode.onlineode),T=Object(_.a)(x,{},[e.folder_path,e.run_number,e.dataset_name,e.plot_search]),N=dr(T.data,R.data),D=dr(T.errors,R.errors),z=Object(B.e)(N),I=Object(B.f)(z),M=function(e,t){var n=Object(a.useState)([]),r=n[0],o=n[1],l=Object(i.useRouter)().query;return Object(a.useEffect)((function(){var t=e.map((function(e){if(e.path){var t=Object(B.j)(e),n=t.name,a=t.directories;return{name:n,path:e.path&&a,layout:e.layout,qresults:j.a.new_back_end.new_back_end?e.qtstatuses:e.qresults}}}));o(t||[])}),[t,l.dataset_name,l.run_number]),r}(z,N);a.useEffect((function(){g(Object(B.f)(z)),S(p()(M))}),[N,e.folder_path,P,e.dataset_name,M]);var q=function(e,t){var n=a.useState([]),r=Object(m.a)(n,2),o=r[0],l=r[1],i=a.useState([]),c=Object(m.a)(i,2),u=c[0],s=c[1],d=[],f=e.workspaces,p=e.folder_path,b=e.plot_search;return a.useEffect((function(){sr.forEach((function(e){e.workspaces.forEach((function(e){e.label===f&&l(e.foldersPath)}))}))}),[f]),a.useEffect((function(){if(f&&!p){var e=L.a.uniq(o.map((function(e){return e.split("/")[0]}))).map((function(e){return{subdir:e}}));s(e)}else if(f&&p){o.forEach((function(e){var t=Object(ur.a)(p),n=e.search(t);if(n>=0){var a=n+t.length,r=e.substring(a,e.length).split("/")[1];r&&d.push(r)}}));var t=d.map((function(e){return{subdir:e}}));s(t)}}),[p,o,b]),{filteredFolders:u}}(e).filteredFolders;return a.useEffect((function(){f(I)}),[e.dataset_name,e.run_number,JSON.stringify(I)]),a.useEffect((function(){var e=q.length>0?q:d,t=Object(B.g)(v,e),n=T.isLoading;C(n),c(t)}),[v,q,d,D]),{foldersByPlotSearch:l,plots:w,isLoading:P,errors:D}},pr=a.createElement,br=function(e){var t=e.viewPlotsPosition,n=e.setViewPlotsPosition,a=e.disabled;return pr(en,{options:$.g,getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},current_value:t,action:n,disabled:a})},mr=a.createElement,hr=function(e){var t=e.proportion,n=e.setProportion,a=e.disabled;return mr(en,{options:$.d,getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},current_value:t,disabled:a,action:n})},vr=n("+YFz"),gr=a.createElement,yr=function(e){return e?gr(s.a,{title:"At least one plot must be selected"},gr(vr.a,null)):gr(a.Fragment,null)},Or=a.createElement,_r=function(e){var t=e.openSettings,n=e.toggleSettingsModal,r=e.isAnyPlotSelected,o=a.useContext(w.b),l=o.viewPlotsPosition,i=o.setViewPlotsPosition,c=o.proportion,s=o.setProportion;return Or(v.i,{title:"Settings",visible:t,onCancel:function(){return n(!1)},footer:null},Or(Qt.a,null,Or(g.p,{name:"position",label:"Plots View Position",labelweight:"bold"},Or(g.e,{display:"flex",justifycontent:"space-between"},Or(u.a,null,Or(br,{viewPlotsPosition:l,setViewPlotsPosition:i,disabled:r})),Or(u.a,null,yr(r)))),Or(g.p,{name:"proportions",label:"Plots View Proportions",labelweight:"bold"},Or(Nt.a,null,Or(u.a,null,Or(hr,{proportion:c,setProportion:s,disabled:r})),Or(u.a,null,yr(r))))))},jr=a.createElement,wr=function(e){var t=e.me_count,n=e.children;return j.a.new_back_end.new_back_end?jr(g.g,{count:t},n):n},Sr=function(e){var t=e.directories,n=Object(i.useRouter)().query,r=la().blink;return jr(a.Fragment,null,t.map((function(e){return jr(u.a,{span:4,key:e.subdir},jr(mn.b,null,jr(g.c,{hover:"true",display:"flex",space:"1",alignitems:"center",onClick:function(){return Object(B.a)(Object(B.d)({folder_path:Object(B.i)(n.folder_path,e.subdir)},n))}},jr(wr,{me_count:e.me_count?e.me_count:0},jr(mn.d,{isLoading:r.toString(),animation:("ONLINE"===j.a.mode).toString()})),jr(mn.i,null,e.subdir))))})))},Er=n("vOnD"),kr=Object(Er.e)(["0%{background:",";color:",";}100%{background:",";}"],y.a.colors.secondary.main,y.a.colors.common.white,y.a.colors.primary.light),Pr=Er.d.div.withConfig({displayName:"styledComponents__ParentWrapper",componentId:"qjilkp-0"})(["width:","px;height:","px;justify-content:center;margin:4px;background:",";display:grid;align-items:end;padding:8px;animation-iteration-count:1;animation-duration:1s;animation-name:",";"],(function(e){return e.size.w+30+(e.plotsAmount?e.plotsAmount:16)}),(function(e){return e.size.h+40+(e.plotsAmount?e.plotsAmount:16)}),(function(e){return"true"===e.isPlotSelected?y.a.colors.secondary.light:y.a.colors.primary.light}),(function(e){return"true"===e.isLoading&&"true"===e.animation?kr:""})),Cr=Er.d.div.withConfig({displayName:"styledComponents__LayoutName",componentId:"qjilkp-1"})(["padding-bottom:4;color:",";font-weight:",";word-break:break-word;"],(function(e){return"true"===e.error?y.a.colors.notification.error:y.a.colors.common.black}),(function(e){return"true"===e.isPlotSelected?"bold":""})),xr=Er.d.div.withConfig({displayName:"styledComponents__LayoutWrapper",componentId:"qjilkp-2"})(["display:grid;grid-template-columns:",";justify-content:center;"],(function(e){return e.auto})),Rr=Er.d.div.withConfig({displayName:"styledComponents__PlotWrapper",componentId:"qjilkp-3"})(["justify-content:center;border:",";align-items:center;width:",";height:",";;cursor:pointer;padding:4px;align-self:center;justify-self:baseline;cursor:",";"],(function(e){return e.plotSelected?"4px solid ".concat(y.a.colors.secondary.light):"2px solid ".concat(y.a.colors.primary.light)}),(function(e){return e.width?"calc(".concat(e.width,"+8px)"):"fit-content"}),(function(e){return e.height?"calc(".concat(e.height,"+8px)"):"fit-content"}),(function(e){return e.plotSelected?"zoom-out":"zoom-in"})),Tr=a.createElement,Nr=function(e){var t=e.globalState,n=e.query,a=e.plot,r=e.onePlotHeight,o=e.onePlotWidth,l=e.selected_plots,i=e.imageRef,c=e.imageRefScrollDown,u=e.blink,d=e.updated_by_not_older_than,f=W(t,n,encodeURI(a.name),a.path);f.width=o,f.height=r;var p=Object(j.h)(f),b=Object(j.g)(f).join("");f.joined_overlaied_plots_urls=b;var m=Object(j.i)(f);a.dataset_name=n.dataset_name,a.run_number=n.run_number;var h=Object(B.l)(l,a),v=a.path+"/"+a.name;return Tr(s.a,{title:v,color:Y(a)?"red":""},Tr(Rr,{height:"".concat(r,"px"),width:"".concat(o,"px"),plotSelected:h,onClick:Object(_t.a)(Ot.a.mark((function e(){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h;case 2:setTimeout((function(){G(i),X(c)}),500);case 3:case"end":return e.stop()}}),e)}))),ref:i},n.overlay_data?Tr(fa,{blink:u,params_for_api:f,plot:a,plotURL:m,updated_by_not_older_than:d,query:n,imageRef:i,isPlotSelected:h}):Tr(fa,{blink:u,params_for_api:f,plot:a,plotURL:p,updated_by_not_older_than:d,query:n,imageRef:i,isPlotSelected:h})))},Lr=a.createElement,Dr=function(e){var t=e.plots,n=e.globalState,r=e.imageRefScrollDown,o=e.layoutName,l=e.query,i=e.selected_plots,c=a.useContext(w.b).size,u=a.useState(o),s=Object(m.a)(u,2),d=s[0],f=s[1],p=a.useState(!1),b=Object(m.a)(p,2),h=b[0],v=b[1],g=a.useState(0),y=Object(m.a)(g,2),O=y[0],_=y[1],S=a.useRef(null),E=a.useRef(null);a.useEffect((function(){f(o)}),[o]);var k,P=Math.ceil(Math.log(2)/Math.log(t.length))-Math.log(2)/Math.log(t.length)!==0&&1!==t.length?t.length+Math.ceil(Math.sqrt(t.length)):Math.pow(t.length,2),C=c.h*c.w,x=c.w/c.h,R=C/P,T=Math.floor(Math.sqrt(R/x)),N=Math.floor(Math.sqrt(R/x)*x),L=Math.floor(c.w/N),D=[],z=la(),I=z.blink,M=z.updated_by_not_older_than;for(k=0;k<L;k++)D.push("auto");return a.useEffect((function(){_(O+1),S.current&&O<3&&v(S.current.clientHeight>24)}),[S.current&&S.current.clientHeight]),Lr(Pr,{plotsAmount:t.length,isLoading:I.toString(),animation:("ONLINE"===j.a.mode).toString(),size:c},Lr(Cr,{ref:S},Object(ee.a)(h,d||"")),Lr(xr,{size:c,auto:D.join(" ")},t.map((function(e){return Lr(Nr,{globalState:n,query:l,plot:e,onePlotHeight:T,onePlotWidth:N,selected_plots:i,imageRef:E,imageRefScrollDown:r,blink:I,updated_by_not_older_than:M})}))))},zr=a.createElement,Ir=function(e){var t=e.plots_grouped_by_layouts,n=e.selected_plots,r=e.globalState,o=e.imageRefScrollDown,l=e.query,i=Object.keys(t);return zr(a.Fragment,null,i.map((function(e){var a=t[e];return zr(Dr,{layoutName:e,plots:a,selected_plots:n,imageRefScrollDown:o,query:l,globalState:r})})))},Mr=r.a.createElement,qr=function(e){var t=e.plot,n=e.selected_plots,o=e.params_for_api,l=e.imageRefScrollDown,c=Object(i.useRouter)().query,u=Object(a.useContext)(w.b).size,d=Object(a.useRef)(null),f=r.a.useRef(null),p=r.a.useState(0),b=Object(m.a)(p,2),h=b[0],v=b[1],g=r.a.useState(!1),y=Object(m.a)(g,2),O=y[0],_=y[1],S=la(),E=S.blink,k=S.updated_by_not_older_than,P=Object(j.h)(o),C=Object(B.l)(n,t);return Object(a.useEffect)((function(){C&&(G(d),X(l))}),[C,c.selected_plots]),r.a.useEffect((function(){v(h+1),f.current&&h<3&&_(f.current.clientHeight>24)}),[f.current&&f.current.clientHeight]),t.dataset_name=c.dataset_name,t.run_number=c.run_number,Mr(s.a,{title:O?decodeURI(o.plot_name):""},Mr(Pr,{isLoading:E.toString(),animation:("ONLINE"===j.a.mode).toString(),size:u,isPlotSelected:C.toString()},Mr(Cr,{ref:f,isPlotSelected:C.toString(),error:Y(t).toString()},Object(ee.a)(O,o.plot_name?o.plot_name:"")),Mr(xr,{size:u,auto:"auto"},Mr(Rr,{plotSelected:C,onClick:Object(_t.a)(Ot.a.mark((function e(){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C;case 2:setTimeout((function(){G(d),X(l)}),500);case 3:case"end":return e.stop()}}),e)}))),ref:d},Mr(fa,{blink:E,params_for_api:o,plot:t,plotURL:P,updated_by_not_older_than:k,query:c,imageRef:d,isPlotSelected:C})))))};function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){Object(D.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Br=r.a.createElement,Fr=function(e){var t=e.plot,n=e.params_for_api,o=e.selected_plots,l=e.imageRefScrollDown;n.plot_name=t.name;var c=function(e){var t=[],n=Ar({},e);return t.push(Object(j.h)(n)),n.overlay_plot&&n.overlay_plot.map((function(a){n.dataset_name=a.dataset_name?a.dataset_name:e.dataset_name,n.run_number=a.run_number,t.push(Object(j.h)(n))})),t}(n),u=function(e){var t=[],n=Ar({},e),a={name:e.plot_name,dataset_name:e.dataset_name,path:e.folders_path,run_number:e.run_number};return t.push(a),n.overlay_plot&&n.overlay_plot.map((function(n){var a=n.run_number,r=n.dataset_name,o={run_number:a,name:e.plot_name,dataset_name:r,path:e.folders_path};t.push(o)})),t}(n),d=Object(a.useContext)(w.b).size,f=Object(i.useRouter)().query,p=Object(a.useRef)(null),b=r.a.useRef(null),h=r.a.useState(0),v=Object(m.a)(h,2),g=v[0],y=v[1],O=r.a.useState(!1),_=Object(m.a)(O,2),S=_[0],E=_[1];r.a.useEffect((function(){y(g+1),b.current&&g<3&&E(b.current.clientHeight>24)}),[b.current&&b.current.clientHeight]),t.dataset_name=f.dataset_name,t.run_number=f.run_number;var k=la(),P=k.blink,C=k.updated_by_not_older_than;return Br(mn.g,null,c.map((function(e,a){var r=Object(B.l)(o,u[a]);return Br(s.a,{title:S?decodeURI(n.plot_name):""},Br(Pr,{isPlotSelected:r.toString(),isLoading:P.toString(),animation:("ONLINE"===j.a.mode).toString(),size:d},Br(Cr,{ref:b,isPlotSelected:B.l.toString(),error:Y(t).toString()},Object(ee.a)(S,n.plot_name?n.plot_name:"")),Br(xr,{size:d,auto:"auto"},Br(Rr,{plotSelected:r,onClick:Object(_t.a)(Ot.a.mark((function e(){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:setTimeout((function(){G(p),X(l)}),500);case 3:case"end":return e.stop()}}),e)}))),ref:p},Br(fa,{blink:P,params_for_api:n,plot:u[a],plotURL:e,updated_by_not_older_than:C,query:f,imageRef:p,isPlotSelected:r})))))})))},Vr=r.a.createElement,Ur=function(e){var t=e.plot,n=e.params_for_api,o=e.selected_plots,l=e.imageRefScrollDown,c=Object(a.useContext)(w.b),u=c.normalize,d=c.size;n.plot_name=t.name,n.normalize=u;var f=Object(j.g)(n).join("");n.joined_overlaied_plots_urls=f;var p=Object(j.i)(n),b=Object(i.useRouter)().query,h=Object(a.useRef)(null),v=la(),g=v.blink,y=v.updated_by_not_older_than;t.dataset_name=b.dataset_name,t.run_number=b.run_number;var O=r.a.useRef(null),_=r.a.useState(0),S=Object(m.a)(_,2),E=S[0],k=S[1],P=r.a.useState(!1),C=Object(m.a)(P,2),x=C[0],R=C[1];r.a.useEffect((function(){k(E+1),O.current&&E<3&&R(O.current.clientHeight>24)}),[O.current&&O.current.clientHeight]);var T=Object(B.l)(o,t);return Vr(s.a,{title:x?decodeURI(n.plot_name):""},Vr(Pr,{isLoading:g.toString(),animation:("ONLINE"===j.a.mode).toString(),size:d,isPlotSelected:T.toString()},Vr(Cr,{ref:O,error:Y(t).toString(),isPlotSelected:T.toString()}," ",Object(ee.a)(x,n.plot_name?n.plot_name:"")),Vr(xr,{size:d,auto:"auto"},Vr(Rr,{plotSelected:T,onClick:Object(_t.a)(Ot.a.mark((function e(){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T;case 2:setTimeout((function(){G(h),X(l)}),500);case 3:case"end":return e.stop()}}),e)}))),ref:h},Vr(fa,{blink:g,params_for_api:n,plot:t,plotURL:p,updated_by_not_older_than:y,query:b,imageRef:h,isPlotSelected:T})))))},Wr=r.a.createElement,Jr=function(e){var t=e.plot,n=e.selected_plots,a=e.params_for_api,o=e.imageRefScrollDown;return Wr(r.a.Fragment,null,"onSide"===a.overlay?Wr(Fr,{params_for_api:a,plot:t,selected_plots:n,imageRefScrollDown:o}):Wr(Ur,{plot:t,params_for_api:a,selected_plots:n,imageRefScrollDown:o}))},Kr=r.a.createElement,Gr=function(e){var t=e.plots,n=e.selected_plots,a=e.globalState,o=e.imageRefScrollDown,l=e.query;return Kr(r.a.Fragment,null,t.map((function(e){var t=W(a,l,encodeURI(e.name),e.path);return e?Kr("div",{key:e.name},l.overlay_data?Kr(Jr,{key:e.name,plot:e,params_for_api:t,imageRefScrollDown:o,selected_plots:n}):Kr(qr,{plot:e,imageRefScrollDown:o,params_for_api:t,key:e.name,selected_plots:n})):Kr(r.a.Fragment,null)})))},Xr=r.a.createElement,Yr=function(e){var t=e.plots,n=e.selected_plots,o=e.plots_grouped_by_layouts,l=o||{},c=Object(a.useContext)(w.b),u=Object(i.useRouter)().query,s=c.imageRefScrollDown;return t.length>0?Xr(r.a.Fragment,null,j.a.new_back_end.layouts&&0!==Object.keys(l).length?Xr(Ir,{plots_grouped_by_layouts:l,selected_plots:n,query:u,imageRefScrollDown:s,globalState:c}):Xr(Gr,{plots:t,selected_plots:n,query:u,imageRefScrollDown:s,globalState:c})):Xr(r.a.Fragment,null)},Qr=a.createElement,Zr=function(e){var t=e.plots,n=e.selected_plots,r=e.plots_grouped_by_layouts,o=e.isLoading,l=e.viewPlotsPosition,i=e.proportion,c=e.errors,u=e.filteredFolders,s=e.plotsAreaRef;return Qr(mn.m,{ref:s,any_selected_plots:n.length>0&&0===c.length,position:l,proportion:i},o&&0===u.length?Qr(Tt.k,null,Qr(Tt.j,null)):Qr(a.Fragment,null,o||0!==u.length||0!==t.length||0!==c.length?0===c.length?Qr(a.Fragment,null,Qr(g.e,{width:"100%",space:"2"},Qr(Sr,{directories:u})),Qr(Nt.a,null,Qr(Yr,{plots:t,selected_plots:n,plots_grouped_by_layouts:r}))):!o&&c.length>0&&c.map((function(e){return Qr(Tt.m,{key:e,message:e,type:"error",showIcon:!0})})):Qr(zt.a,null)))},$r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M632 888H392c-4.4 0-8 3.6-8 8v32c0 17.7 14.3 32 32 32h192c17.7 0 32-14.3 32-32v-32c0-4.4-3.6-8-8-8zM512 64c-181.1 0-328 146.9-328 328 0 121.4 66 227.4 164 284.1V792c0 17.7 14.3 32 32 32h264c17.7 0 32-14.3 32-32V676.1c98-56.7 164-162.7 164-284.1 0-181.1-146.9-328-328-328zm127.9 549.8L604 634.6V752H420V634.6l-35.9-20.8C305.4 568.3 256 484.5 256 392c0-141.4 114.6-256 256-256s256 114.6 256 256c0 92.5-49.4 176.3-128.1 221.8z"}}]},name:"bulb",theme:"outlined"},eo=function(e,t){return a.createElement(Ee.a,Object.assign({},e,{ref:t,icon:$r}))};eo.displayName="BulbOutlined";var to=a.forwardRef(eo),no=a.createElement,ao=no(Cn.a,null,no(Cn.a.Item,null,no("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cmsrunregistry.web.cern.ch/online/global?"},"Run Registry")),no(Cn.a.Item,null,no("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cmsoms.cern.ch/"},"OMS")),no(Cn.a.Item,null,no("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cmsonline.cern.ch/"},"CMS online"))),ro=function(){return no(xn.a,{overlay:ao,placement:"bottomCenter",arrow:!0},no(g.v,{icon:no(to,null)},"Useful Links"))},oo=n("VTBJ"),lo=n("5Z9U"),io=n("6cGi"),co=n("wgJM");function uo(e){var t=Object(a.useRef)(),n=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return function(){n.current=!0,co.a.cancel(t.current)}}),[]),function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n.current||(co.a.cancel(t.current),t.current=Object(co.a)((function(){e.apply(void 0,r)})))}}function so(e,t){var n,r=e.prefixCls,o=e.id,l=e.active,i=e.rtl,c=e.tab,u=c.key,s=c.tab,d=c.disabled,f=c.closeIcon,p=e.tabBarGutter,b=e.tabPosition,m=e.closable,h=e.renderWrapper,v=e.removeAriaLabel,g=e.editable,y=e.onClick,O=e.onRemove,_=e.onFocus,j="".concat(r,"-tab");a.useEffect((function(){return O}),[]);var w={};"top"===b||"bottom"===b?w[i?"marginLeft":"marginRight"]=p:w.marginBottom=p;var S=g&&!1!==m&&!d;function E(e){d||y(e)}var k=a.createElement("div",{key:u,ref:t,className:ie()(j,(n={},Object(D.a)(n,"".concat(j,"-with-remove"),S),Object(D.a)(n,"".concat(j,"-active"),l),Object(D.a)(n,"".concat(j,"-disabled"),d),n)),style:w,onClick:E},a.createElement("div",{role:"tab","aria-selected":l,id:o&&"".concat(o,"-tab-").concat(u),className:"".concat(j,"-btn"),"aria-controls":o&&"".concat(o,"-panel-").concat(u),"aria-disabled":d,tabIndex:d?null:0,onClick:function(e){e.stopPropagation(),E(e)},onKeyDown:function(e){[ze.a.SPACE,ze.a.ENTER].includes(e.which)&&(e.preventDefault(),E(e))},onFocus:_},s),S&&a.createElement("button",{type:"button","aria-label":v||"remove",tabIndex:0,className:"".concat(j,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),g.onEdit("remove",{key:u,event:t})}},f||g.removeIcon||"\xd7"));return h&&(k=h(k)),k}var fo=a.forwardRef(so),po={width:0,height:0,left:0,top:0};var bo={width:0,height:0,left:0,top:0,right:0};var mo=n("1j5w"),ho=n("eDIo");function vo(e,t){var n=e.prefixCls,r=e.editable,o=e.locale,l=e.style;return r&&!1!==r.showAdd?a.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:l,"aria-label":(null===o||void 0===o?void 0:o.addAriaLabel)||"Add tab",onClick:function(e){r.onEdit("add",{event:e})}},r.addIcon||"+"):null}var go=a.forwardRef(vo);function yo(e,t){var n=e.prefixCls,r=e.id,o=e.tabs,l=e.locale,i=e.mobile,c=e.moreIcon,u=void 0===c?"More":c,s=e.moreTransitionName,d=e.style,f=e.className,p=e.editable,b=e.tabBarGutter,h=e.rtl,v=e.onTabClick,g=Object(a.useState)(!1),y=Object(m.a)(g,2),O=y[0],_=y[1],j=Object(a.useState)(null),w=Object(m.a)(j,2),S=w[0],E=w[1],k="".concat(r,"-more-popup"),P="".concat(n,"-dropdown"),C=null!==S?"".concat(k,"-").concat(S):null,x=null===l||void 0===l?void 0:l.dropdownAriaLabel,R=a.createElement(mo.f,{onClick:function(e){var t=e.key,n=e.domEvent;v(t,n),_(!1)},id:k,tabIndex:-1,role:"listbox","aria-activedescendant":C,selectedKeys:[S],"aria-label":void 0!==x?x:"expanded dropdown"},o.map((function(e){return a.createElement(mo.d,{key:e.key,id:"".concat(k,"-").concat(e.key),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(e.key),disabled:e.disabled},e.tab)})));function T(e){for(var t=o.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===S}))||0,a=t.length,r=0;r<a;r+=1){var l=t[n=(n+e+a)%a];if(!l.disabled)return void E(l.key)}}Object(a.useEffect)((function(){var e=document.getElementById(C);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[S]),Object(a.useEffect)((function(){O||E(null)}),[O]);var N=Object(D.a)({},h?"marginLeft":"marginRight",b);o.length||(N.visibility="hidden",N.order=1);var L=ie()(Object(D.a)({},"".concat(P,"-rtl"),h)),z=i?null:a.createElement(ho.a,{prefixCls:P,overlay:R,trigger:["hover"],visible:O,transitionName:s,onVisibleChange:_,overlayClassName:L,mouseEnterDelay:.1,mouseLeaveDelay:.1},a.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:N,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":k,id:"".concat(r,"-more"),"aria-expanded":O,onKeyDown:function(e){var t=e.which;if(O)switch(t){case ze.a.UP:T(-1),e.preventDefault();break;case ze.a.DOWN:T(1),e.preventDefault();break;case ze.a.ESC:_(!1);break;case ze.a.SPACE:case ze.a.ENTER:null!==S&&v(S,e)}else[ze.a.DOWN,ze.a.SPACE,ze.a.ENTER].includes(t)&&(_(!0),e.preventDefault())}},u));return a.createElement("div",{className:ie()("".concat(n,"-nav-operations"),f),style:d,ref:t},z,a.createElement(go,{prefixCls:n,locale:l,editable:p}))}var Oo=a.forwardRef(yo),_o=Object(a.createContext)(null),jo=Math.pow(.995,20);function wo(e,t){var n=a.useRef(e),r=a.useState({}),o=Object(m.a)(r,2)[1];return[n.current,function(e){var a="function"===typeof e?e(n.current):e;a!==n.current&&t(a,n.current),n.current=a,o({})}]}var So=function(e){var t,n=e.position,r=e.prefixCls,o=e.extra;if(!o)return null;var l=o;return"right"===n&&(t=l.right||!l.left&&l||null),"left"===n&&(t=l.left||null),t?a.createElement("div",{className:"".concat(r,"-extra-content")},t):null};function Eo(e,t){var n,r=a.useContext(_o),o=r.prefixCls,l=r.tabs,i=e.className,c=e.style,u=e.id,s=e.animated,d=e.activeKey,f=e.rtl,p=e.extra,b=e.editable,h=e.locale,v=e.tabPosition,g=e.tabBarGutter,y=e.children,O=e.onTabClick,_=e.onTabScroll,j=Object(a.useRef)(),w=Object(a.useRef)(),E=Object(a.useRef)(),k=Object(a.useRef)(),P=function(){var e=Object(a.useRef)(new Map);return[function(t){return e.current.has(t)||e.current.set(t,a.createRef()),e.current.get(t)},function(t){e.current.delete(t)}]}(),C=Object(m.a)(P,2),x=C[0],R=C[1],T="top"===v||"bottom"===v,N=wo(0,(function(e,t){T&&_&&_({direction:e>t?"left":"right"})})),L=Object(m.a)(N,2),z=L[0],I=L[1],M=wo(0,(function(e,t){!T&&_&&_({direction:e>t?"top":"bottom"})})),q=Object(m.a)(M,2),H=q[0],A=q[1],B=Object(a.useState)(0),F=Object(m.a)(B,2),V=F[0],U=F[1],W=Object(a.useState)(0),J=Object(m.a)(W,2),K=J[0],G=J[1],X=Object(a.useState)(0),Y=Object(m.a)(X,2),Q=Y[0],Z=Y[1],$=Object(a.useState)(0),ee=Object(m.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(null),re=Object(m.a)(ae,2),le=re[0],ce=re[1],ue=Object(a.useState)(null),se=Object(m.a)(ue,2),de=se[0],fe=se[1],pe=Object(a.useState)(0),be=Object(m.a)(pe,2),me=be[0],he=be[1],ve=Object(a.useState)(0),ge=Object(m.a)(ve,2),ye=ge[0],Oe=ge[1],_e=function(e){var t=Object(a.useRef)([]),n=Object(a.useState)({}),r=Object(m.a)(n,2)[1],o=Object(a.useRef)("function"===typeof e?e():e),l=uo((function(){var e=o.current;t.current.forEach((function(t){e=t(e)})),t.current=[],o.current=e,r({})}));return[o.current,function(e){t.current.push(e),l()}]}(new Map),je=Object(m.a)(_e,2),we=je[0],Se=je[1],Ee=function(e,t,n){return Object(a.useMemo)((function(){for(var n,a=new Map,r=t.get(null===(n=e[0])||void 0===n?void 0:n.key)||po,o=r.left+r.width,l=0;l<e.length;l+=1){var i,c=e[l].key,u=t.get(c);u||(u=t.get(null===(i=e[l-1])||void 0===i?void 0:i.key)||po);var s=a.get(c)||Object(oo.a)({},u);s.right=o-s.left-s.width,a.set(c,s)}return a}),[e.map((function(e){return e.key})).join("_"),t,n])}(l,we,V),ke="".concat(o,"-nav-operations-hidden"),Pe=0,Ce=0;function xe(e){return e<Pe?Pe:e>Ce?Ce:e}T?f?(Pe=0,Ce=Math.max(0,V-le)):(Pe=Math.min(0,le-V),Ce=0):(Pe=Math.min(0,de-K),Ce=0);var Re=Object(a.useRef)(),Te=Object(a.useState)(),Le=Object(m.a)(Te,2),De=Le[0],ze=Le[1];function Ie(){ze(Date.now())}function Me(){window.clearTimeout(Re.current)}function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=Ee.get(e)||{width:0,height:0,left:0,right:0,top:0};if(T){var n=z;f?t.right<z?n=t.right:t.right+t.width>z+le&&(n=t.right+t.width-le):t.left<-z?n=-t.left:t.left+t.width>-z+le&&(n=-(t.left+t.width-le)),A(0),I(xe(n))}else{var a=H;t.top<-H?a=-t.top:t.top+t.height>-H+de&&(a=-(t.top+t.height-de)),I(0),A(xe(a))}}!function(e,t){var n=Object(a.useState)(),r=Object(m.a)(n,2),o=r[0],l=r[1],i=Object(a.useState)(0),c=Object(m.a)(i,2),u=c[0],s=c[1],d=Object(a.useState)(0),f=Object(m.a)(d,2),p=f[0],b=f[1],h=Object(a.useState)(),v=Object(m.a)(h,2),g=v[0],y=v[1],O=Object(a.useRef)(),_=Object(a.useRef)(),j=Object(a.useRef)(null);j.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,a=t.screenY;l({x:n,y:a}),window.clearInterval(O.current)},onTouchMove:function(e){if(o){e.preventDefault();var n=e.touches[0],a=n.screenX,r=n.screenY;l({x:a,y:r});var i=a-o.x,c=r-o.y;t(i,c);var d=Date.now();s(d),b(d-u),y({x:i,y:c})}},onTouchEnd:function(){if(o&&(l(null),y(null),g)){var e=g.x/p,n=g.y/p,a=Math.abs(e),r=Math.abs(n);if(Math.max(a,r)<.1)return;var i=e,c=n;O.current=window.setInterval((function(){Math.abs(i)<.01&&Math.abs(c)<.01?window.clearInterval(O.current):t(20*(i*=jo),20*(c*=jo))}),20)}},onWheel:function(e){var n=e.deltaX,a=e.deltaY,r=0,o=Math.abs(n),l=Math.abs(a);o===l?r="x"===_.current?n:a:o>l?(r=n,_.current="x"):(r=a,_.current="y"),t(-r,-r)&&e.preventDefault()}},a.useEffect((function(){function t(e){j.current.onTouchMove(e)}function n(e){j.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),e.current.addEventListener("touchstart",(function(e){j.current.onTouchStart(e)}),{passive:!1}),e.current.addEventListener("wheel",(function(e){j.current.onWheel(e)})),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])}(j,(function(e,t){function n(e,t){e((function(e){return xe(e+t)}))}if(T){if(le>=V)return!1;n(I,e)}else{if(de>=K)return!1;n(A,t)}return Me(),Ie(),!0})),Object(a.useEffect)((function(){return Me(),De&&(Re.current=window.setTimeout((function(){ze(0)}),100)),Me}),[De]);var He=function(e,t,n,r,o){var l,i,c,u=o.tabs,s=o.tabPosition,d=o.rtl;["top","bottom"].includes(s)?(l="width",i=d?"right":"left",c=Math.abs(t.left)):(l="height",i="top",c=-t.top);var f=t[l],p=n[l],b=r[l],m=f;return p+b>f&&(m=f-b),Object(a.useMemo)((function(){if(!u.length)return[0,0];for(var t=u.length,n=t,a=0;a<t;a+=1){var r=e.get(u[a].key)||bo;if(r[i]+r[l]>c+m){n=a-1;break}}for(var o=0,s=t-1;s>=0;s-=1)if((e.get(u[s].key)||bo)[i]<c){o=s+1;break}return[o,n]}),[e,c,m,s,u.map((function(e){return e.key})).join("_"),d])}(Ee,{width:le,height:de,left:z,top:H},{width:Q,height:te},{width:me,height:ye},Object(oo.a)(Object(oo.a)({},e),{},{tabs:l})),Ae=Object(m.a)(He,2),Be=Ae[0],Fe=Ae[1],Ve=l.map((function(e){var t=e.key;return a.createElement(fo,{id:u,prefixCls:o,key:t,rtl:f,tab:e,closable:e.closable,editable:b,active:t===d,tabPosition:v,tabBarGutter:g,renderWrapper:y,removeAriaLabel:null===h||void 0===h?void 0:h.removeAriaLabel,ref:x(t),onClick:function(e){O(t,e)},onRemove:function(){R(t)},onFocus:function(){qe(t),Ie(),f||(j.current.scrollLeft=0),j.current.scrollTop=0}})})),Ue=uo((function(){var e,t,n,a,r,o,i,c,u,s=(null===(e=j.current)||void 0===e?void 0:e.offsetWidth)||0,d=(null===(t=j.current)||void 0===t?void 0:t.offsetHeight)||0,f=(null===(n=k.current)||void 0===n?void 0:n.offsetWidth)||0,p=(null===(a=k.current)||void 0===a?void 0:a.offsetHeight)||0,b=(null===(r=E.current)||void 0===r?void 0:r.offsetWidth)||0,m=(null===(o=E.current)||void 0===o?void 0:o.offsetHeight)||0;ce(s),fe(d),he(f),Oe(p);var h=((null===(i=w.current)||void 0===i?void 0:i.offsetWidth)||0)-f,v=((null===(c=w.current)||void 0===c?void 0:c.offsetHeight)||0)-p;U(h),G(v);var g=null===(u=E.current)||void 0===u?void 0:u.className.includes(ke);Z(h-(g?0:b)),ne(v-(g?0:m)),Se((function(){var e=new Map;return l.forEach((function(t){var n=t.key,a=x(n).current;a&&e.set(n,{width:a.offsetWidth,height:a.offsetHeight,left:a.offsetLeft,top:a.offsetTop})})),e}))})),We=l.slice(0,Be),Je=l.slice(Fe+1),Ke=[].concat(Object(S.a)(We),Object(S.a)(Je)),Ge=Object(a.useState)(),Xe=Object(m.a)(Ge,2),Ye=Xe[0],Qe=Xe[1],Ze=Ee.get(d),$e=Object(a.useRef)();function et(){co.a.cancel($e.current)}Object(a.useEffect)((function(){var e={};return Ze&&(T?(f?e.right=Ze.right:e.left=Ze.left,e.width=Ze.width):(e.top=Ze.top,e.height=Ze.height)),et(),$e.current=Object(co.a)((function(){Qe(e)})),et}),[Ze,T,f]),Object(a.useEffect)((function(){qe()}),[d,Ze,Ee,T]),Object(a.useEffect)((function(){Ue()}),[f,g,d,l.map((function(e){return e.key})).join("_")]);var tt,nt,at,rt,ot=!!Ke.length,lt="".concat(o,"-nav-wrap");return T?f?(nt=z>0,tt=z+le<V):(tt=z<0,nt=-z+le<V):(at=H<0,rt=-H+de<K),a.createElement("div",{ref:t,role:"tablist",className:ie()("".concat(o,"-nav"),i),style:c,onKeyDown:function(){Ie()}},a.createElement(So,{position:"left",extra:p,prefixCls:o}),a.createElement(Ne.a,{onResize:Ue},a.createElement("div",{className:ie()(lt,(n={},Object(D.a)(n,"".concat(lt,"-ping-left"),tt),Object(D.a)(n,"".concat(lt,"-ping-right"),nt),Object(D.a)(n,"".concat(lt,"-ping-top"),at),Object(D.a)(n,"".concat(lt,"-ping-bottom"),rt),n)),ref:j},a.createElement(Ne.a,{onResize:Ue},a.createElement("div",{ref:w,className:"".concat(o,"-nav-list"),style:{transform:"translate(".concat(z,"px, ").concat(H,"px)"),transition:De?"none":void 0}},Ve,a.createElement(go,{ref:k,prefixCls:o,locale:h,editable:b,style:{visibility:ot?"hidden":null}}),a.createElement("div",{className:ie()("".concat(o,"-ink-bar"),Object(D.a)({},"".concat(o,"-ink-bar-animated"),s.inkBar)),style:Ye}))))),a.createElement(Oo,Object(oe.a)({},e,{ref:E,prefixCls:o,tabs:Ke,className:!ot&&ke})),a.createElement(So,{position:"right",extra:p,prefixCls:o}))}var ko=a.forwardRef(Eo);function Po(e){var t=e.id,n=e.activeKey,r=e.animated,o=e.tabPosition,l=e.rtl,i=e.destroyInactiveTabPane,c=a.useContext(_o),u=c.prefixCls,s=c.tabs,d=r.tabPane,f=s.findIndex((function(e){return e.key===n}));return a.createElement("div",{className:ie()("".concat(u,"-content-holder"))},a.createElement("div",{className:ie()("".concat(u,"-content"),"".concat(u,"-content-").concat(o),Object(D.a)({},"".concat(u,"-content-animated"),d)),style:f&&d?Object(D.a)({},l?"marginRight":"marginLeft","-".concat(f,"00%")):null},s.map((function(e){return a.cloneElement(e.node,{key:e.key,prefixCls:u,tabKey:e.key,id:t,animated:d,active:e.key===n,destroyInactiveTabPane:i})}))))}function Co(e){var t=e.prefixCls,n=e.forceRender,r=e.className,o=e.style,l=e.id,i=e.active,c=e.animated,u=e.destroyInactiveTabPane,s=e.tabKey,d=e.children,f=a.useState(n),p=Object(m.a)(f,2),b=p[0],h=p[1];a.useEffect((function(){i?h(!0):u&&h(!1)}),[i,u]);var v={};return i||(c?(v.visibility="hidden",v.height=0,v.overflowY="hidden"):v.display="none"),a.createElement("div",{id:l&&"".concat(l,"-panel-").concat(s),role:"tabpanel",tabIndex:i?0:-1,"aria-labelledby":l&&"".concat(l,"-tab-").concat(s),"aria-hidden":!i,style:Object(oo.a)(Object(oo.a)({},v),o),className:ie()("".concat(t,"-tabpane"),i&&"".concat(t,"-tabpane-active"),r)},(i||b||n)&&d)}var xo=0;function Ro(e,t){var n,r,o=e.id,l=e.prefixCls,i=void 0===l?"rc-tabs":l,c=e.className,u=e.children,s=e.direction,d=e.activeKey,f=e.defaultActiveKey,p=e.editable,b=e.animated,h=void 0===b?{inkBar:!0,tabPane:!1}:b,v=e.tabPosition,g=void 0===v?"top":v,y=e.tabBarGutter,O=e.tabBarStyle,_=e.tabBarExtraContent,j=e.locale,w=e.moreIcon,S=e.moreTransitionName,E=e.destroyInactiveTabPane,k=e.renderTabBar,P=e.onChange,C=e.onTabClick,x=e.onTabScroll,R=Object(Qn.a)(e,["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll"]),T=function(e){return Object(_e.a)(e).map((function(e){if(a.isValidElement(e)){var t=void 0!==e.key?String(e.key):void 0;return Object(oo.a)(Object(oo.a)({key:t},e.props),{},{node:e})}return null})).filter((function(e){return e}))}(u),N="rtl"===s;r=!1===h?{inkBar:!1,tabPane:!1}:!0===h?{inkBar:!0,tabPane:!0}:Object(oo.a)({inkBar:!0,tabPane:!1},"object"===Object(me.a)(h)?h:{});var L=Object(a.useState)(!1),z=Object(m.a)(L,2),I=z[0],M=z[1];Object(a.useEffect)((function(){M(Object(lo.a)())}),[]);var q=Object(io.a)((function(){var e;return null===(e=T[0])||void 0===e?void 0:e.key}),{value:d,defaultValue:f}),H=Object(m.a)(q,2),A=H[0],B=H[1],F=Object(a.useState)((function(){return T.findIndex((function(e){return e.key===A}))})),V=Object(m.a)(F,2),U=V[0],W=V[1];Object(a.useEffect)((function(){var e,t=T.findIndex((function(e){return e.key===A}));-1===t&&(t=Math.max(0,Math.min(U,T.length-1)),B(null===(e=T[t])||void 0===e?void 0:e.key));W(t)}),[T.map((function(e){return e.key})).join("_"),A,U]);var J=Object(io.a)(null,{value:o}),K=Object(m.a)(J,2),G=K[0],X=K[1],Y=g;I&&!["left","right"].includes(g)&&(Y="top"),Object(a.useEffect)((function(){o||(X("rc-tabs-".concat(xo)),xo+=1)}),[]);var Q,Z={id:G,activeKey:A,animated:r,tabPosition:Y,rtl:N,mobile:I},$=Object(oo.a)(Object(oo.a)({},Z),{},{editable:p,locale:j,moreIcon:w,moreTransitionName:S,tabBarGutter:y,onTabClick:function(e,t){null===C||void 0===C||C(e,t),B(e),null===P||void 0===P||P(e)},onTabScroll:x,extra:_,style:O,panes:u});return Q=k?k($,ko):a.createElement(ko,$),a.createElement(_o.Provider,{value:{tabs:T,prefixCls:i}},a.createElement("div",Object(oe.a)({ref:t,id:o,className:ie()(i,"".concat(i,"-").concat(Y),(n={},Object(D.a)(n,"".concat(i,"-mobile"),I),Object(D.a)(n,"".concat(i,"-editable"),p),Object(D.a)(n,"".concat(i,"-rtl"),N),n),c)},R),Q,a.createElement(Po,Object(oe.a)({destroyInactiveTabPane:E},Z,{animated:r}))))}var To=a.forwardRef(Ro);To.TabPane=Co;var No=To,Lo=n("GZ0F"),Do=n("4i/N"),zo=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};function Io(e){var t,n,r=e.type,o=e.className,l=e.size,i=e.onEdit,c=e.hideAdd,u=e.centered,s=e.addIcon,d=zo(e,["type","className","size","onEdit","hideAdd","centered","addIcon"]),f=d.prefixCls,p=a.useContext(ue.b),b=p.getPrefixCls,m=p.direction,h=b("tabs",f);return"editable-card"===r&&(n={onEdit:function(e,t){var n=t.key,a=t.event;null===i||void 0===i||i("add"===e?a:n,e)},removeIcon:a.createElement(Do.a,null),addIcon:s||a.createElement(Aa,null),showAdd:!0!==c}),Object(se.a)(!("onPrevClick"in d)&&!("onNextClick"in d),"Tabs","`onPrevClick` and `onNextClick` has been removed. Please use `onTabScroll` instead."),a.createElement(No,Object(oe.a)({direction:m},d,{moreTransitionName:"slide-up",className:ie()((t={},Object(D.a)(t,"".concat(h,"-").concat(l),l),Object(D.a)(t,"".concat(h,"-card"),["card","editable-card"].includes(r)),Object(D.a)(t,"".concat(h,"-editable-card"),"editable-card"===r),Object(D.a)(t,"".concat(h,"-centered"),u),t),o),editable:n,moreIcon:a.createElement(Lo.a,null),prefixCls:h}))}Io.TabPane=Co;var Mo=Io,qo=[{label:"Summaries",workspaces:[{label:"Summary",foldersPath:["Summary"]},{label:"Shift",foldersPath:["00 Shift"]},{label:"Info",foldersPath:["Info"]},{label:"Everything",foldersPath:[]}]},{label:"Trigger",workspaces:[{label:"L1T",foldersPath:["L1T"]},{label:"L1T2016EMU",foldersPath:["L1T2016EMU"]},{label:"L1T2016",foldersPath:["L1T2016"]},{label:"L1TEMU",foldersPath:["L1TEMU"]},{label:"HLT",foldersPath:["HLT"]}]},{label:"Tracker",workspaces:[{label:"PixelPhase1",foldersPath:["PixelPhase1"]},{label:"Pixel",foldersPath:["Pixel"]},{label:"SiStrip",foldersPath:["SiStrip","Tracking"]}]},{label:"Calorimeters",workspaces:[{label:"Ecal",foldersPath:["Ecal","EcalBarrel","EcalEndcap","EcalCalibration"]},{label:"EcalPreshower",foldersPath:["EcalPreshower"]},{label:"HCAL",foldersPath:["Hcal","Hcal2"]},{label:"HCALcalib",foldersPath:["HcalCalib"]},{label:"Castor",foldersPath:["Castor"]}]},{label:"Muons",workspaces:[{label:"CSC",foldersPath:["CSC"]},{label:"DT",foldersPath:["DT"]},{label:"RPC",foldersPath:["RPC"]}]},{label:"CTPPS",workspaces:[{label:"TrackingStrip",foldersPath:["CTPPS/TrackingStrip","CTPPS/common","CTPPS/TrackingStrip/Layouts"]},{label:"TrackingPixel",foldersPath:["CTPPS/TrackingPixel","CTPPS/common","CTPPS/TrackingPixel/Layouts"]},{label:"TimingDiamond",foldersPath:["CTPPS/TimingDiamond","CTPPS/common","CTPPS/TimingDiamond/Layouts"]},{label:"TimingFastSilicon",foldersPath:["CTPPS/TimingFastSilicon","CTPPS/common","CTPPS/TimingFastSilicon/Layouts"]}]}],Ho=a.createElement,Ao=Mo.TabPane,Bo=function(){var e=a.useContext(w.b),t=e.workspace,n=e.setWorkspace,r="ONLINE"===j.a.mode?qo:sr,o="ONLINE"===j.a.mode?r[0].workspaces[1].label:r[0].workspaces[3].label;a.useEffect((function(){return n(o),function(){return n(o)}}),[]);var l=Object(i.useRouter)().query,c=a.useState(!1),u=Object(m.a)(c,2),s=u[0],d=u[1];return Ho(Qt.a,null,Ho(g.p,{label:"Workspace"},Ho(At.a,{onClick:function(){d(!s)},type:"link"},t),Ho(v.i,{title:"Workspaces",visible:s,onCancel:function(){return d(!1)},footer:null},Ho(Mo,{defaultActiveKey:"1",type:"card"},r.map((function(e){return Ho(Ao,{key:e.label,tab:e.label},e.workspaces.map((function(e){return Ho(At.a,{key:e.label,type:"link",onClick:Object(_t.a)(Ot.a.mark((function t(){return Ot.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(e.label),d(!s),t.next=4,Object(ur.b)(l,e.label);case 4:case"end":return t.stop()}}),t)})))},e.label)})))}))))))},Fo=a.createElement,Vo=function(){var e=Object(i.useRouter)().query,t=a.useState(e.plot_search),n=Object(m.a)(t,2),r=n[0],o=n[1];return a.useEffect((function(){if(e.plot_search!==r){var t=Object(B.d)({plot_search:r},e);Object(B.a)(t)}}),[r]),a.useMemo((function(){return Fo(Qt.a,{onChange:function(e){return o(e.target.value)}},Fo(g.p,null,Fo(g.u,{defaultValue:e.plot_search,id:"plot_search",placeholder:"Enter plot name"})))}),[r])},Uo=r.a.createElement,Wo=function(e){var t=e.folder_path,n=e.run_number,o=e.dataset_name,l=Object(a.useContext)(w.b),c=l.viewPlotsPosition,s=l.proportion,d=l.updated_by_not_older_than,f=Object(i.useRouter)().query,p={run_number:n,dataset_name:o,folders_path:t,notOlderThan:d,plot_search:f.plot_search},b=Object(a.useState)(!1),h=b[0],v=b[1],y=f.selected_plots,O=fr(f,p,d),_=O.foldersByPlotSearch,j=O.plots,S=O.isLoading,E=O.errors,k=j.filter((function(e){return e.hasOwnProperty("layout")})),P=Object(N.chain)(k).sortBy("layout").groupBy("layout").value(),C=_||[],x=Object(B.k)(y,j),R=r.a.useRef(null),T=r.a.useState(0),L=Object(m.a)(T,2),D=L[0],z=L[1];return r.a.useEffect((function(){R.current&&z(R.current.clientWidth)}),[R.current]),Uo(r.a.Fragment,null,Uo(g.e,{space:"2",width:"100%",justifycontent:"space-between"},Uo(_r,{openSettings:h,toggleSettingsModal:v,isAnyPlotSelected:0===x.length}),Uo(u.a,{style:{padding:8}},Uo(cr.a,{folder_path:t,changeFolderPathByBreadcrumb:function(e){return Object(B.a)(Object(B.d)(e,f))}})),Uo(Nt.a,{gutter:16},Uo(u.a,null,Uo(Bo,null)),Uo(u.a,null,Uo(Vo,null)),Uo(u.a,null,Uo(ro,null)),Uo(u.a,null,Uo(g.v,{icon:Uo(Vn,null),onClick:function(){return v(!0)}},"Settings")))),Uo(g.e,{width:"100%"},Uo(ir,{plotsAreaWidth:D,selected_plots:x.length>0})),Uo(r.a.Fragment,null,Uo(mn.c,{selectedPlots:x.length>0,position:c},Uo(Zr,{plotsAreaRef:R,plots:j,selected_plots:x,plots_grouped_by_layouts:P,isLoading:S,viewPlotsPosition:c,proportion:s,errors:E,filteredFolders:C,query:f}),x.length>0&&0===E.length&&Uo(mn.o,{any_selected_plots:x.length&&0===E.length,proportion:s,position:c},Uo(Ta,{selected_plots:x})))))},Jo=a.createElement,Ko=function(){var e=mt().set_update;return Jo(g.j,{onClick:function(){!function(e,t){c.a.push({pathname:"/",query:{run_number:e,dataset_name:t,folder_path:"Summary"}})}("0","/Global/Online/ALL"),e(!0)}},"Live Mode")},Go=a.createElement,Xo=function(e){var t=e.latest_runs,n=e.mode,r=la().blink,o=mt().set_update;return a.useEffect((function(){return o(!0),function(){return o(!1)}}),[]),Go(Tt.e,null,t.map((function(e){return Go(Tt.n,{key:e.toString()},Go(Tt.h,{isLoading:r.toString(),animation:("ONLINE"===n).toString(),hover:"true",onClick:function(){o(!1),Object(B.a)({search_run_number:e})}},Go(Tt.l,null,e)))})))},Yo=a.createElement,Qo=function(){var e=a.useContext(w.b).updated_by_not_older_than,t=Object(_.a)(Object(j.n)(e),{},[]),n=Object(_.a)(Object(j.n)(e),{},[e]),r=dr(t.data,n.data),o=dr(t.errors,n.errors),l=t.isLoading,i=r&&r.runs.sort((function(e,t){return e-t}));return Yo(a.Fragment,null,!l&&o.length>0?o.map((function(e){return Yo(Tt.m,{key:e,message:e,type:"error",showIcon:!0})})):l?Yo(Tt.k,null,Yo(Tt.j,null)):Yo(Tt.c,null,Yo(g.c,{display:"flex",justifycontent:"flex-end",width:"auto"},Yo(Ko,null)),Yo(Tt.d,null,"The latest runs"),l?Yo(Tt.k,null,Yo(Tt.j,null)):i&&0===i.length&&!l&&0===o.length?Yo(zt.a,null):i&&Yo(Xo,{latest_runs:i,mode:j.a.mode})))},Zo=a.createElement,$o=function(){var e=Object(i.useRouter)().query,t=mt().set_update,n=a.useContext(w.b).workspace,r=qt(e.search_run_number,e.search_dataset_name),o=r.results_grouped,l=r.searching,c=r.isLoading,u=r.errors;return e.dataset_name&&e.run_number?Zo(Wo,{run_number:e.run_number||"",dataset_name:e.dataset_name||"",folder_path:e.folder_path||""}):l?Zo(Mt,{isLoading:c,results_grouped:o,handler:function(a,r){t(!1);var o=Object(ee.g)(a.toString()),l=o.parsedRun,i=o.parsedLumi;Object(B.a)(Object(B.d)({lumi:i,run_number:l,dataset_name:r,workspaces:n,plot_search:""},e))},errors:u}):!j.a.new_back_end.latest_runs||e.dataset_name||e.run_number?Zo(Tt.g,null,Zo(Tt.f,{noBorder:!0},Zo(Tt.a,null),"Welcome to DQM GUI")):Zo(Qo,null)},el=a.createElement,tl=el(Cn.a,null,[{name:"Online",link:"https://cmsweb.cern.ch/dqm/online-new/"},{name:"Online-playback",link:"https://cmsweb.cern.ch/dqm/online-playback-new/"},{name:"Offline",link:"https://dqm-gui.web.cern.ch/"}].map((function(e){return el(Cn.a.Item,{disabled:j.o===e.name.toUpperCase()},el(At.a,{type:"link",disabled:j.o===e.name.toUpperCase(),onClick:function(){return location.href=e.link}},e.name))}))),nl=function(){return el(xn.a,{overlay:tl,placement:"bottomCenter",arrow:!0},el(At.a,{type:"link",style:{color:"white",fontVariant:"all-small-caps"}},j.o))},al=r.a.createElement;t.default=function(){var e=Object(i.useRouter)().query,t=!!e.run_number&&!!e.dataset_name;return al(d.a,null,al(l.a,null,al("script",{crossOrigin:"anonymous",type:"text/javascript",src:"./jsroot-5.8.0/scripts/JSRootCore.js?2d&hist&more2d"})),al(d.c,null,al(d.b,null,al(u.a,null,al(u.a,{style:{display:"flex",alignItems:"center"}},al(s.a,{title:"Back to main page",placement:"bottomLeft"},al(d.e,null,al(d.f,{onClick:function(e){c.a.push({pathname:"/"})}},al(d.d,{src:"./images/CMSlogo_white_red_nolabel_1024_May2014.png"})))),al(nl,null))),al(An,{isDatasetAndRunNumberSelected:t,query:e})),al($o,null)))}},DB5t:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return f}));var a=n("KQm4"),r=n("ODXe"),o=n("q1tI"),l=n.n(o),i=n("Rja7"),c=l.a.createElement,u={size:i.f.medium.size,normalize:"True",stats:!0,overlayPosition:i.c[0].value,overlay:void 0,overlayPlots:[],triples:[],openOverlayDataMenu:!1,viewPlotsPosition:i.g[1].value,proportion:i.d[0].value,lumisection:-1,rightSideSize:i.f.fill.size,JSROOTmode:!1,shortcuts:[],customizeProps:{xtype:"",xmin:NaN,xmax:NaN,ytype:"",ymin:NaN,ymax:NaN,ztype:"",zmin:NaN,zmax:NaN,drawopts:"",withref:""},updated_by_not_older_than:10*Math.round((new Date).getTime()/1e4)},s=Object(o.createContext)(u),d=s.Provider,f=function(e){var t=e.children,n=Object(o.useState)(u.size),i=n[0],s=n[1],f=Object(o.useState)(u.normalize),p=f[0],b=f[1],m=Object(o.useState)(u.stats),h=m[0],v=m[1],g=Object(o.useState)({}),y=g[0],O=g[1],_=Object(o.useState)(u.overlayPosition),j=_[0],w=_[1],S=Object(o.useState)(u.overlayPlots),E=S[0],k=S[1],P=Object(o.useState)(null),C=P[0],x=P[1],R=l.a.useState([]),T=Object(r.a)(R,2),N=T[0],L=T[1],D=l.a.useState(""),z=Object(r.a)(D,2),I=z[0],M=z[1],q=l.a.useState(u.triples),H=Object(r.a)(q,2),A=H[0],B=H[1],F=l.a.useState(u.openOverlayDataMenu),V=Object(r.a)(F,2),U=V[0],W=V[1],J=l.a.useState(u.viewPlotsPosition),K=Object(r.a)(J,2),G=K[0],X=K[1],Y=l.a.useState(u.proportion),Q=Object(r.a)(Y,2),Z=Q[0],$=Q[1],ee=l.a.useState(u.lumisection),te=Object(r.a)(ee,2),ne=te[0],ae=te[1],re=Object(o.useState)(u.rightSideSize),oe=re[0],le=re[1],ie=Object(o.useState)(!1),ce=ie[0],ue=ie[1],se=Object(o.useState)({xtype:"",xmin:NaN,xmax:NaN,ytype:"",ymin:NaN,ymax:NaN,ztype:"",zmin:NaN,zmax:NaN,drawopts:"",withref:""}),de=se[0],fe=se[1],pe=l.a.useState(A||[]),be=Object(r.a)(pe,2),me=be[0],he=be[1],ve=Object(o.useState)(!1),ge=ve[0],ye=ve[1],Oe=Object(o.useState)(u.updated_by_not_older_than),_e=Oe[0],je=Oe[1];return c(d,{value:{size:i,setSize:s,normalize:p,setNormalize:b,stats:h,setStats:v,plotsWhichAreOverlaid:y,setPlotsWhichAreOverlaid:O,overlayPosition:j,setOverlaiPosition:w,overlayPlots:E,setOverlay:k,imageRefScrollDown:C,setImageRefScrollDown:x,workspace:I,setWorkspace:M,plotSearchFolders:N,setPlotSearchFolders:L,change_value_in_reference_table:function(e,t,n){var r=Object(a.a)(A),o=A.filter((function(e){return e.id===n}))[0];o||(o=me.filter((function(e){return e.id===n}))[0]);var l=r.indexOf(o);o[t]=e,r[l]=o,B(r)},triples:A,setTriples:B,openOverlayDataMenu:U,toggleOverlayDataMenu:W,viewPlotsPosition:G,setViewPlotsPosition:X,proportion:Z,setProportion:$,lumisection:ne,setLumisection:ae,rightSideSize:oe,setRightSideSize:le,JSROOTmode:ce,setJSROOTmode:ue,customize:de,setCustomize:fe,runs_set_for_overlay:me,set_runs_set_for_overlay:he,updated_by_not_older_than:_e,set_updated_by_not_older_than:je,update:ge,set_update:ye}},t)}},E9nw:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}}},[["/EDR",0,2,4,6,1,3,5]]]);